Kinetic.Node.prototype.closest=function(e){for(var t=this.parent;void 0!==t;){if(t.nodeType===e)return t;t=t.parent}return!1},Kinetic.Stage.prototype.createCopy=function(){var e,t=[],a=this.getChildren();for(e=0;e<a.length;e++)t.push(a[e].clone());return t},Kinetic.Stage.prototype.getScaledWidth=function(){return Math.ceil(this.getWidth()/this.getScale().x)},Kinetic.Stage.prototype.getScaledHeight=function(){return Math.ceil(this.getHeight()/this.getScale().y)},Kinetic.Stage.prototype.getSaveWidth=function(){return this.im.saveWidth},Kinetic.Stage.prototype.getSaveHeight=function(){return this.im.saveHeight},Kinetic.Stage.prototype.getTotalDimensions=function(){var e=(this.getSaveHeight()/2-this.im.center.y)*this.getScale().y,t=e+this.getHeight()-this.getSaveHeight()*this.getScale().y,a=(this.getSaveWidth()/2-this.im.center.x)*this.getScale().x;return{min:{x:a,y:e},max:{x:a+this.getWidth()-this.getSaveWidth()*this.getScale().x,y:t},width:this.getScaledWidth(),height:this.getScaledHeight(),visibleWidth:Math.max(this.getSaveWidth(),2*this.getScaledWidth()-this.getSaveWidth()),visibleHeight:Math.max(this.getSaveHeight(),2*this.getScaledHeight()-this.getSaveHeight())}},Kinetic.Stage.prototype.loadCopy=function(e){var t;for(this.removeChildren(),t=0;t<e.length;t++)this.add(e[t]);this.draw()},Kinetic.Stage.prototype.elementType="stage",Kinetic.Image.prototype.getImageData=function(){var e=new Kinetic.Canvas(this.attrs.image.width,this.attrs.image.height),t=e.getContext();t.drawImage(this.attrs.image,0,0);try{return t.getImageData(0,0,e.getWidth(),e.getHeight())}catch(e){Kinetic.Util.warn("Unable to get imageData.")}},Kinetic.Layer.prototype._cacheddraw=(new Kinetic.Layer).draw,Kinetic.Layer.prototype.draw=function(){return"undefined"==typeof im||im.trigger,this._cacheddraw()},Kinetic.Layer.prototype.elementType="layer",Kinetic.Group.prototype.elementType="group",Kinetic.Text.prototype.rasterize=function(e){var t=this.parent,a=this;this.toImage({callback:function(i){var n=new Kinetic.Image({image:i,x:a.getPosition().x,y:a.getPosition().y});a.remove(),t.add(n).draw(),e.callback(n)}})},function(){var e,t;try{e=Object.getPrototypeOf(document.createElement("canvas").getContext("2d")),t=e.drawImage}catch(e){t=null}t&&(e.drawImage=function(){return arguments.length>=4&&(this.imageSmoothingEnabled=!0,"string"==typeof this.imageSmoothingQuality&&(this.imageSmoothingQuality="high")),t.apply(this,arguments)})}();var control_sets=[],components=[],filters=[],ImageEditor=function(e){"use strict";if(void 0===e)return this;e.pixelRatio=1;var t=this,a=function(e){return Math.round(e)};t.saveData=e.saveData||{},t.saveUrl=e.saveUrl,t.token=e.token,t.width=e.width,t.height=e.height,t.strictSize=void 0!==e.strictSize?!!e.strictSize:e.saveWidth>0,t.saveWidth=e.saveWidth||(t.strictSize?0:a(t.width/2)),t.saveHeight=e.saveHeight||(t.strictSize?0:a(t.height/2)),t.stage=new Kinetic.Stage(e),t.namespaces={},t.controlSets={},t.components={},t.settings=e,t.filters={},t.fileId=t.settings.fID,t.scale=1,t.crosshair=new Image,t.uniqid=t.stage.getContainer().id,t.editorContext=$(t.stage.getContainer()).parent(),t.domContext=t.editorContext.parent(),t.controlContext=t.domContext.children("div.controls"),t.controlSetNamespaces=[],t.showLoader=$.fn.dialog.showLoader,t.hideLoader=$.fn.dialog.hideLoader,t.stage.im=t,t.stage.elementType="stage",t.crosshair.src=CCM_IMAGE_PATH+"/image_editor/crosshair.png",t.center={x:Math.round(t.width/2),y:Math.round(t.height/2)},t.centerOffset={x:t.center.x,y:t.center.y};var i=function(e){return $(e,t.domContext)},n=function(){if(!0===e.debug&&"undefined"!=typeof console){var t=arguments;1==t.length&&(t=t[0]),console.log(t)}},o=function(){if(!0===e.debug&&"undefined"!=typeof console){var t=arguments;1==t.length&&(t=t[0]),console.warn(t)}},s=function(){if("undefined"!=typeof console){var e=arguments;1==e.length&&(e=e[0]),console.error("Image Editor Error: "+e)}};t.stage._setDraggable=t.stage.setDraggable,t.stage.setDraggable=function(e){return o("setting draggable to "+e),t.stage._setDraggable(e)},t.bindEvent=t.bind=t.on=function(e,a,i){var n=i||t.stage.getContainer();n instanceof jQuery&&(n=n[0]),ConcreteEvent.sub(e,a,n)},t.fireEvent=t.fire=t.trigger=function(e,a,i){var n=i||t.stage.getContainer();n instanceof jQuery&&(n=n[0]),ConcreteEvent.pub(e,a,n)},t.addElement=function(e,a){var i=new Kinetic.Layer;e.elementType=a,i.elementType=a,i.add(e),t.stage.add(i),i.moveDown(),t.stage.draw()},t.on("backgroundBuilt",function(){void 0!==t.activeElement&&void 0!==t.activeElement.doppelganger&&(t.foreground.add(t.activeElement.doppelganger),t.activeElement.doppelganger.setPosition(t.activeElement.getPosition()))}),t.setActiveElement=function(e){if(e.defer)return t.setActiveElement(e.defer);t.activeElement!=e&&(void 0!==t.activeElement&&void 0!==t.activeElement.doppelganger&&t.activeElement.doppelganger.remove(),e===t.stage||"Stage"==e.nodeType?(t.trigger("ChangeActiveAction",t.controlSetNamespaces.length?t.controlSetNamespaces[0]:void 0),$("div.control-sets",t.controlContext).find("h4.active").removeClass("active")):void 0!==e.doppelganger&&(t.foreground.add(e.doppelganger),t.foreground.draw()),t.trigger("beforeChangeActiveElement",t.activeElement),t.alterCore("activeElement",e),t.trigger("changeActiveElement",e),t.stage.draw())},t.bind("ClickedElement",function(e,a){t.setActiveElement(a)}),t.bind("stageChanged",function(e){(t.activeElement.getWidth()>t.stage.getScaledWidth()||t.activeElement.getHeight()>t.stage.getScaledHeight())&&t.setActiveElement(t.stage)});var r=i(t.stage.getContainer()).parent().children(".bottomBar");r.attr("unselectable","on");var c={};c.zoomIn=i("<div class='bottombarbutton plus'><i class='fa fa-plus'></i></div>"),c.zoomOut=i("<div class='bottombarbutton'><i class='fa fa-minus'></i></div>"),c.zoomIn.appendTo(r),c.zoomOut.appendTo(r),c.zoomIn.click(function(e){t.fire("zoomInClick",e)}),c.zoomOut.click(function(e){t.fire("zoomOutClick",e)});var d=i("<div></div>").addClass("scale").text("100%");t.on("scaleChange",function(e){d.text(Math.round(1e4*t.scale)/100+"%")}),d.click(function(){t.scale=1,t.stage.setScale(t.scale);var e=t.stage.getDragBoundFunc()({x:t.stage.getX(),y:t.stage.getY()});t.stage.setX(e.x),t.stage.setY(e.y),t.fire("scaleChange"),t.buildBackground(),t.stage.draw()}),d.appendTo(r);t.on("zoomInClick",function(e){var a=(-t.stage.getX()+t.stage.getWidth()/2)/t.scale,i=(-t.stage.getY()+t.stage.getHeight()/2)/t.scale;t.scale/=5/6,t.scale=Math.round(1e3*t.scale)/1e3,t.alterCore("scale",t.scale);var n=(-t.stage.getX()+t.stage.getWidth()/2)/t.scale,o=(-t.stage.getY()+t.stage.getHeight()/2)/t.scale;t.stage.setX(t.stage.getX()-(a-n)*t.scale),t.stage.setY(t.stage.getY()-(i-o)*t.scale),t.stage.setScale(t.scale);var s=t.stage.getDragBoundFunc()({x:t.stage.getX(),y:t.stage.getY()});t.stage.setX(s.x),t.stage.setY(s.y),t.fire("scaleChange"),t.buildBackground(),t.stage.draw()}),t.on("zoomOutClick",function(e){var a=(-t.stage.getX()+t.stage.getWidth()/2)/t.scale,i=(-t.stage.getY()+t.stage.getHeight()/2)/t.scale;t.scale*=5/6,t.scale=Math.round(1e3*t.scale)/1e3,t.alterCore("scale",t.scale);var n=(-t.stage.getX()+t.stage.getWidth()/2)/t.scale,o=(-t.stage.getY()+t.stage.getHeight()/2)/t.scale;t.stage.setX(t.stage.getX()-(a-n)*t.scale),t.stage.setY(t.stage.getY()-(i-o)*t.scale),t.stage.setScale(t.scale);var s=t.stage.getDragBoundFunc()({x:t.stage.getX(),y:t.stage.getY()});t.stage.setX(s.x),t.stage.setY(s.y),t.fire("scaleChange"),t.buildBackground(),t.stage.draw()});var g={};if(g.width=i("<span/>").addClass("saveWidth"),g.height=i("<span/>").addClass("saveHeight"),g.crop=i('<div><i class="icon-resize-full"/></div>').addClass("bottombarbutton").addClass("crop"),g.both=g.height.add(g.width).width(32).attr("contenteditable",!0),g.area=i("<span/>").css({float:"right"}),t.on("adjustedsavers",function(){g.width.text(t.saveWidth),g.height.text(t.saveHeight)}),g.crop.click(function(){t.adjustSavers()}),t.strictSize?g.both.attr("disabled","true"):g.both.keyup(function(e){t.fire("editedSize",e)}),t.bind("editedSize",function(e){t.saveWidth=parseInt(g.width.text()),t.saveHeight=parseInt(g.height.text()),isNaN(t.saveWidth)&&(t.saveWidth=0),isNaN(t.saveHeight)&&(t.saveHeight=0),t.buildBackground()}),t.bind("saveSizeChange",function(){g.width.text(t.saveWidth),g.height.text(t.saveHeight)}),t.setCursor=function(e){$(t.stage.getContainer()).css("cursor",e)},t.save=function(){t.fire("ChangeActiveAction"),t.fire("ImageEditorWillSave"),$.fn.dialog.showLoader(),t.stage.toDataURL({callback:function(a){var i=$("<img />").addClass("fake_canvas").appendTo(t.editorContext.children(".Editor"));i.attr("src",a),i.css({position:"absolute",top:0,left:0,backgroundColor:"white"});var n=t.stage.getPosition(),o=t.scale,s=t.stage.getWidth(),r=t.stage.getHeight();t.stage.setPosition(-t.saveArea.getX(),-t.saveArea.getY()),t.stage.setScale(1),t.background.hide(),t.foreground.hide(),t.stage.setHeight(t.saveHeight+100),t.stage.setWidth(t.saveWidth+100),t.stage.draw();var c=e.mime;"image/jpeg"!==c&&"image/png"!==c&&(c="image/png"),t.stage.toDataURL({mimeType:c,quality:e.jpegCompression,width:t.saveWidth,height:t.saveHeight,callback:function(e){t.stage.setPosition(n),t.background.show(),t.foreground.show(),t.stage.setScale(o),t.stage.setHeight(r),t.stage.setWidth(s),t.stage.draw(),i.remove(),$.post(t.saveUrl,_.extend(t.saveData,{fID:t.fileId,imgData:e,ccm_token:t.token}),function(a){$.fn.dialog.hideLoader();var i=JSON.parse(a);1===i.error?(alert(i.message),$("button.save[disabled]").attr("disabled",!1)):0===i.error&&(t.fire("ImageEditorDidSave",_.extend(t.saveData,{fID:t.fileId,imgData:e})),Concrete.event.fire("ImageEditorDidSave",_.extend(t.saveData,{fID:t.fileId,imgData:e})))})}})}})},t.actualPosition=function(e,a,i,n,o){var s=a-n,r=e-i,c=t.activeElement.getRotation()+Math.atan2(s,r),d=Math.sqrt(Math.pow(r,2)+Math.pow(s,2));return[i+d*Math.cos(c),n+d*Math.sin(c)]},t.getActualRect=function(e,a,i){var n=[],o=i.getRotation();return n.push(t.actualPosition(i.getX(),i.getY(),e,a,o)),n.push(t.actualPosition(i.getX()+i.getWidth()*i.getScaleX(),i.getY(),e,a,o)),n.push(t.actualPosition(i.getX()+i.getWidth()*i.getScaleX(),i.getY()+i.getHeight()*i.getScaleY(),e,a,o)),n.push(t.actualPosition(i.getX(),i.getY()+i.getHeight()*i.getScaleY(),e,a,o)),n},t.adjustSavers=function(e){if("Stage"!==t.activeElement.nodeType){t.foreground.autoCrop=!1,t.background.autoCrop=!1;var a,a,i,n={min:{x:!1,y:!1},max:{x:!1,y:!1}},o=t.activeElement,s=o.parent,r=t.getActualRect(0,0,o);for(a=r.length-1;a>=0;a--){var c=r[a],d=c[0]+s.getX(),g=c[1]+s.getY();(d>n.max.x||!1===n.max.x)&&(n.max.x=d),(d<n.min.x||!1===n.min.x)&&(n.min.x=d),(g>n.max.y||!1===n.max.y)&&(n.max.y=g),(g<n.min.y||!1===n.min.y)&&(n.min.y=g)}i={width:n.max.x-n.min.x,height:n.max.y-n.min.y},t.strictSize||(t.alterCore("saveWidth",Math.round(i.width)),t.alterCore("saveHeight",Math.round(i.height)),t.buildBackground());var l=[t.center.x-t.activeElement.getWidth()*t.activeElement.getScaleX()/2,t.center.y-t.activeElement.getHeight()*t.activeElement.getScaleY()/2],h=t.actualPosition(l[0],l[1],t.center.x,t.center.y,t.activeElement.getRotation());t.activeElement.parent.setPosition(h.map(Math.round)),!1!==e&&t.fire("adjustedsavers"),t.stage.draw()}},t.bind("imageLoad",function(){setTimeout(t.adjustSavers,0)}),t.extend=function(e,t){this[e]=t},t.alterCore=function(e,a){var i,n=t;if(t.namespace){n.namespace;n=t.realIm}t[e]=a;for(i in t.controlSets)t.controlSets[i].im.extend(e,a);for(i in t.filters)t.filters[i].im.extend(e,a);for(i in t.components)t.components[i].im.extend(e,a)},t.clone=function(e){var a,i=new ImageEditor;i.realIm=t;for(a in t)i[a]=t[a];return i.namespace=e,i},t.addControlSet=function(e,a,i){jQuery&&i instanceof jQuery&&(i=i[0]),i.controlSet=function(t,a){t.disable=function(){t.enabled=!1,$(i).parent().parent().addClass("disabled")},t.enable=function(){t.enabled=!0,$(i).parent().parent().removeClass("disabled")},this.im=t,this.$=$,o("Loading ControlSet",t);try{new Function("im","$",a).call(this,t,$)}catch(i){console.log(i.stack);var n=i.stack.replace(/[\S\s]+at HTMLDivElement.eval.+?<anonymous>:(\d+:\d+)[\S\s]+/,"$1").split(":");if(n[1]&&!isNaN(parseInt(n[1]))){var r=a.split("\n"),c="Parse error at line #"+n[0]+" char #"+n[1]+" within "+e;c+="\n"+r[parseInt(n[0])-1],c+="\n"+new Array(parseInt(n[1])).join(" ")+"^",s(c)}else s('"'+i.message+'" in "'+t.namespace+'"')}return this};var n=t.clone(e),r=i.controlSet.call(i,n,a);return t.controlSets[e]=r,r},t.addFilter=function(e,a){var i=function(t,a){this.namespace=t.namespace,this.im=t;try{new Function("im","$",a).call(this,t,$)}catch(t){s(t),window.lastError=t;var i=t.stack.replace(/[\S\s]+at HTMLDivElement.eval.+?<anonymous>:(\d+:\d+)[\S\s]+/,"$1").split(":");if(2!=i.length)s(t.message),s(t.stack);else{var n=a.split("\n"),o="Parse error at line #"+i[0]+" char #"+i[1]+" within "+e;o+="\n"+n[parseInt(i[0])-1],o+="\n"+new Array(parseInt(i[1])||0).join(" ")+"^",s(o)}}return this},n=t.clone(e),o=new i(n,a);return t.filters[e]=o,o},t.addComponent=function(e,a,i){jQuery&&i instanceof jQuery&&(i=i[0]),i.component=function(t,a){t.disable=function(){$(this).parent().parent().addClass("disabled")},t.enable=function(){$(this).parent().parent().removeClass("disabled")},this.im=t,o("Loading component",t);try{new Function("im","$",a).call(this,t,$)}catch(o){var i=o.stack.replace(/[\S\s]+at HTMLDivElement.eval.+?<anonymous>:(\d+:\d+)[\S\s]+/,"$1").split(":");if(i[1]&&!isNaN(parseInt(i[1]))){var n=a.split("\n"),r="Parse error at line #"+i[0]+" char #"+i[1]+" within "+e;r+="\n"+n[parseInt(i[0])-1],r+="\n"+new Array(parseInt(i[1])).join(" ")+"^",s(r)}else s('"'+o.message+'" in "'+t.namespace+'"')}return this};var n=t.clone(e),r=i.component.call(i,n,a);return t.components[e]=r,r},t.background=new Kinetic.Layer,t.foreground=new Kinetic.Layer,t.stage.add(t.background),t.stage.add(t.foreground),t.bgimage=new Image,t.saveArea=new Kinetic.Rect,t.background.add(t.saveArea),t.bind("load",function(){t.saveArea.setFillPatternImage(t.bgimage),t.saveArea.setFillPatternOffset([-t.saveWidth/2,-t.saveHeight/2]),t.saveArea.setFillPatternScale(1/t.scale),t.saveArea.setFillPatternX(0),t.saveArea.setFillPatternY(0),t.saveArea.setFillPatternRepeat("repeat"),t.background.on("click",function(){t.setActiveElement(t.stage)})},t.bgimage),t.bgimage.src=CCM_REL+"/concrete/images/testbg.png",t.buildBackground=function(){var e=t.stage.getTotalDimensions();t.saveArea.setFillPatternOffset([-t.saveWidth/2*t.scale,-t.saveHeight/2*t.scale]),t.saveArea.setX(Math.round(t.center.x-t.saveWidth/2)),t.saveArea.setY(Math.round(t.center.y-t.saveHeight/2)),t.saveArea.setFillPatternScale(1/t.scale),t.saveArea.setWidth(t.saveWidth),t.saveArea.setHeight(t.saveHeight),t.coverLayer||(t.coverLayer=new Kinetic.Rect,t.coverLayer.setStroke("rgba(150,150,150,.5)"),t.coverLayer.setFill("transparent"),t.coverLayer.setListening(!1),t.coverLayer.setStrokeWidth(Math.max(e.width,e.height,500)),t.foreground.add(t.coverLayer));var a=2*Math.max(e.width,e.height);t.coverLayer.setPosition(t.saveArea.getX()-a/2,t.saveArea.getY()-a/2),t.coverLayer.setSize(t.saveArea.getWidth()+a,t.saveArea.getHeight()+a),t.coverLayer.setStrokeWidth(a),t.fire("backgroundBuilt"),t.saveArea.draw(),t.coverLayer.draw()},t.buildBackground(),t.on("stageChanged",t.buildBackground),t.stage.setDragBoundFunc(function(e){var a=t.stage.getTotalDimensions(),i=Math.max(a.max.x,a.min.x)+100,n=Math.min(a.max.x,a.min.x)-100,o=Math.max(a.max.y,a.min.y)+100,s=Math.min(a.max.y,a.min.y)-100;return e.x=Math.floor(e.x),e.y=Math.floor(e.y),e.x>i&&(e.x=i),e.x<n&&(e.x=n),e.y>o&&(e.y=o),e.y<s&&(e.y=s),e.x=Math.floor(e.x),e.y=Math.floor(e.y),e}),t.setActiveElement(t.stage),t.stage.setDraggable(!0),t.autoCrop=!0,t.on("imageLoad",function(){var e=t.stage.getWidth()-100,a=t.stage.getHeight()-100;if(!(t.saveWidth<e&&t.saveHeight<a)){var i=Math.max(t.saveWidth/e,t.saveHeight/a);t.scale=1/i,t.scale=Math.round(100*t.scale)/100,t.alterCore("scale",t.scale),t.stage.setScale(t.scale),t.stage.setX((t.stage.getWidth()-t.stage.getWidth()*t.stage.getScale().x)/2),t.stage.setY((t.stage.getHeight()-t.stage.getHeight()*t.stage.getScale().y)/2);var n=t.stage.getDragBoundFunc()({x:t.stage.getX(),y:t.stage.getY()});t.stage.setX(n.x),t.stage.setY(n.y),t.fire("scaleChange"),t.fire("stageChanged"),t.buildBackground()}}),t.fit=function(e,a){if(!1===a)return{width:t.saveWidth,height:t.saveHeight};var i=e.height,n=e.width;return n>t.saveWidth&&(i/=n/t.saveWidth,n=t.saveWidth),i>t.saveHeight&&(n/=i/t.saveHeight,i=t.saveHeight),{width:n,height:i}},e.src){t.showLoader(ccmi18n_imageeditor.loadingImage);var l=new Image,h=!1;l.crossOrigin="Anonymous",t.bind("ControlSetsLoaded",function(){h=!0}),t.bind("load",function(){function e(){_.defer(function(){t.stage.draw(),t.setActiveElement(i),t.fire("changeActiveAction",t.controlSetNamespaces[0])})}t.strictSize?0!=t.saveWidth&&0!=t.saveHeight||(0==t.saveWidth?0==t.saveHeight?(t.saveWidth=l.width,t.saveHeight=l.height,t.fire("saveSizeChange"),t.buildBackground()):(t.saveWidth=Math.floor(l.width/l.height*t.saveHeight),t.fire("saveSizeChange"),t.buildBackground()):0==t.saveHeight&&(t.saveHeight=Math.floor(l.height/l.width*t.saveWidth),t.fire("saveSizeChange"),t.buildBackground())):(t.saveWidth=l.width,t.saveHeight=l.height,t.fire("saveSizeChange"),t.buildBackground());var a={x:Math.floor(t.center.x-l.width/2),y:Math.floor(t.center.y-l.height/2)},i=new Kinetic.Image({image:l,x:0,y:0});i.setPosition(a),t.addElement(i,"image"),_.defer(function(){t.fire("imageload")}),h?e():t.bind("ControlSetsLoaded",e)},l),l.src=e.src}else t.fire("imageload");return t.bind("imageload",function(){var a,i=e.controlsets||{},o=(e.filters,0);n("Loading ControlSets"),t.showLoader(ccmi18n_imageeditor.loadingControlSets),t.fire("LoadingControlSets");for(a in i){var s="ControlSet_"+a;t.controlSetNamespaces.push(s),$.ajax(i[a].src,{dataType:"text",cache:!1,namespace:a,myns:s,beforeSend:function(){o++},success:function(e){o--;var a=t.addControlSet(this.myns,e,i[this.namespace].element);n(a),t.fire("controlSetLoad",a),0==o&&t.trigger("ControlSetsLoaded")},error:function(e,a,i){0==--o&&t.trigger("ControlSetsLoaded")}})}}),t.bind("ControlSetsLoaded",function(){t.fire("LoadingComponents"),t.showLoader(ccmi18n_imageeditor.loadingComponents);var a,i=e.components||{},o=0;n("Loading Components");for(a in i){var s="Component_"+a;$.ajax(i[a].src,{dataType:"text",cache:!1,namespace:a,myns:s,beforeSend:function(){o++},success:function(e){o--;var a=t.addComponent(this.myns,e,i[this.namespace].element);n(a),t.fire("ComponentLoad",a),0==o&&t.trigger("ComponentsLoaded")},error:function(e,a,i){0==--o&&t.trigger("ComponentsLoaded")}})}0==o&&t.trigger("ComponentsLoaded")}),t.bind("ComponentsLoaded",function(){n("Loading Filters"),t.showLoader(ccmi18n_imageeditor.loadingFilters);var a,i,o=e.filters||{},s=0;t.fire("LoadingFilters");for(a in o)o.hasOwnProperty(a)&&function(e){var a=_.clone(o[e]),n="Filter_"+e,r=a.name;i||(i=n),s++,$.ajax(o[e].src,{dataType:"text",cache:!1,namespace:e,myns:n,name:r,success:function(e){var i=t.addFilter(this.myns,e);i.name=this.name,i.settings=a,t.fire("filterLoad",i),0===--s&&t.trigger("FiltersLoaded")},error:function(e,a,i){0===--s&&t.trigger("FiltersLoaded")}})}(a)}),t.bind("ChangeActiveAction",function(e,a){if(a!==t.activeControlSet){for(var n in t.controlSets)i(t.controlSets[n]),n!==a&&i(t.controlSets[n]).slideUp();if(t.activeControlSet=a,t.alterCore("activeControlSet",a),!a)return void $("div.control-sets",t.controlContext).find("h4.active").removeClass("active");var o=$(t.controlSets[a]),s=o.show().height();0!=o.length&&o.hide().height(s).slideDown(function(){$(this).height("")})}}),t.bind("ChangeActiveComponent",function(e,a){if(a!==t.activeComponent){for(var n in t.components)n!==a&&i(t.components[n]).slideUp();if(t.activeComponent=a,t.alterCore("activeComponent",a),a){var o=$(t.components[a]),s=o.show().height();0!=o.length&&o.hide().height(s).slideDown(function(){$(this).height("")})}}}),t.bind("ChangeNavTab",function(e,a){t.trigger("ChangeActiveAction",a),t.trigger("ChangeActiveComponent",a);var n=i("div.editorcontrols");switch(a){case"add":n.children("div.control-sets").hide(),n.children("div.components").show();break;case"edit":n.children("div.components").hide(),n.children("div.control-sets").show()}}),t.bind("FiltersLoaded",function(){t.hideLoader()}),t.slideOut=$("<div/>").addClass("slideOut").css({width:0,float:"right",height:"100%","overflow-x":"hidden",right:t.controlContext.width()-1,position:"absolute",background:"white","box-shadow":"black -20px 0 20px -25px"}),t.slideOutContents=$("<div/>").appendTo(t.slideOut).width(300),t.showSlideOut=function(e,a){t.hideSlideOut(function(){t.slideOut.empty(),t.slideOutContents=e.width(300),t.slideOut.append(t.slideOutContents),t.slideOut.addClass("active").addClass("sliding"),t.slideOut.stop(1).slideOut(300,function(){t.slideOut.removeClass("sliding"),"function"==typeof a&&a()})})},t.hideSlideOut=function(e){t.slideOut.addClass("sliding"),t.slideOut.slideIn(300,function(){t.slideOut.css("border-right","0"),t.slideOut.removeClass("active").removeClass("sliding"),"function"==typeof e&&e()})},t.controlContext.after(t.slideOut),t.setActiveElement(t.stage),window.c5_image_editor=t,window.im=t,t};$.fn.ImageEditor=function(e){void 0===e&&(e={}),e.imageload=$.fn.dialog.hideLoader;var t=$(this);if(e.container=t[0],0==t.height())return void setTimeout(function(){t.ImageEditor(e)},50);t.closest(".ui-dialog").find(".ui-resizable-handle").hide(),t.height("-=30"),$("div.editorcontrols").height(t.height()-90),t.width("-=330").parent().width("-=330").children("div.bottomBar").width("-=330"),void 0===e.width&&(e.width=t.width()),void 0===e.height&&(e.height=t.height()),$.fn.dialog.showLoader();var a=new ImageEditor(e),i=a.domContext;return $("div.control-sets > div.controlset",i).each(function(){var e=$(this),t=e.data("namespace");e.find("h4").click(function(){e.hasClass("active")||a.fire("ChangeActiveAction","ControlSet_"+t)}),a.bind("ChangeActiveAction",function(a,n){if(n==="ControlSet_"+t){i.find("div.controlset.active").removeClass("active").children(".control").slideUp(250),e.addClass("active");e.children(".control").height("auto").slideDown(250)}})}),$("div.controls > div.controlscontainer",i).children("div.save").children("button.save").click(function(){$(this).attr("disabled",!0),a.save()}).end().children("button.cancel").click(function(){confirm(ccmi18n_imageeditor.areYouSure)&&$.fn.dialog.closeTop()}),a.on("ChangeActiveAction",function(e,t){t||$("h4.active",i).removeClass("active")}),a.on("ChangeActiveComponent",function(e,t){t||$("div.controlset.active",i).removeClass("active")}),a.bind("imageload",$.fn.dialog.hideLoader),a},$.fn.slideOut=function(e,t){var a=$(this),i=a.width();return a.css("overflow-y","auto"),255==i?(a.animate({width:255},0,t),this):(a.width(i).animate({width:255},e||300,t||function(){}),this)},$.fn.slideIn=function(e,t){var a=$(this);return a.css("overflow-y","hidden"),0===a.width()?(a.animate({width:0},0,t),this):(a.animate({width:0},e||300,t||function(){}),this)},ImageEditor.prototype=ImageEditor.fn={filter:{grayscale:Kinetic.Filters.Grayscale,sepia:function(e){var t,a=e.data;for(t=0;t<a.length;t+=4)a[t]=.393*a[t]+.769*a[t+1]+.189*a[t+2],a[t+1]=.349*a[t]+.686*a[t+1]+.168*a[t+2],a[t+2]=.272*a[t]+.534*a[t+1]+.131*a[t+2]},brightness:function(e,t){for(var a=t.level,i=e.data,n=0;n<i.length;n+=4)i[n]+=a,i[n+1]+=a,i[n+2]+=a},invert:function(e,t){for(var a=e.data,i=0;i<a.length;i+=4)a[i]=255-a[i],a[i+1]=255-a[i+1],a[i+2]=255-a[i+2]},restore:function(e,t){for(var a=(t.level,e.data),i=t.imageData.data,n=0;n<a.length;n+=4)a[n]=i[n],a[n+1]=i[n+1],a[n+2]=i[n+2]}}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWVkaXRvci5qcyJdLCJuYW1lcyI6WyJLaW5ldGljIiwiTm9kZSIsInByb3RvdHlwZSIsImNsb3Nlc3QiLCJ0eXBlIiwiYWN0aXZlIiwidGhpcyIsInBhcmVudCIsInVuZGVmaW5lZCIsIm5vZGVUeXBlIiwiU3RhZ2UiLCJjcmVhdGVDb3B5IiwiaSIsImNvcHkiLCJjaGlsZHJlbiIsImdldENoaWxkcmVuIiwibGVuZ3RoIiwicHVzaCIsImNsb25lIiwiZ2V0U2NhbGVkV2lkdGgiLCJNYXRoIiwiY2VpbCIsImdldFdpZHRoIiwiZ2V0U2NhbGUiLCJ4IiwiZ2V0U2NhbGVkSGVpZ2h0IiwiZ2V0SGVpZ2h0IiwieSIsImdldFNhdmVXaWR0aCIsImltIiwic2F2ZVdpZHRoIiwiZ2V0U2F2ZUhlaWdodCIsInNhdmVIZWlnaHQiLCJnZXRUb3RhbERpbWVuc2lvbnMiLCJtaW5ZIiwiY2VudGVyIiwibWF4WSIsIm1pblgiLCJtaW4iLCJtYXgiLCJ3aWR0aCIsImhlaWdodCIsInZpc2libGVXaWR0aCIsInZpc2libGVIZWlnaHQiLCJsb2FkQ29weSIsInJlbW92ZUNoaWxkcmVuIiwiYWRkIiwiZHJhdyIsImVsZW1lbnRUeXBlIiwiSW1hZ2UiLCJnZXRJbWFnZURhdGEiLCJjYW52YXMiLCJDYW52YXMiLCJhdHRycyIsImltYWdlIiwiY29udGV4dCIsImdldENvbnRleHQiLCJkcmF3SW1hZ2UiLCJlIiwiVXRpbCIsIndhcm4iLCJMYXllciIsIl9jYWNoZWRkcmF3IiwidHJpZ2dlciIsIkdyb3VwIiwiVGV4dCIsInJhc3Rlcml6ZSIsImxheWVyIiwibWUiLCJ0b0ltYWdlIiwiY2FsbGJhY2siLCJpbWciLCJyYXN0ZXJpemVkSW1hZ2UiLCJnZXRQb3NpdGlvbiIsInJlbW92ZSIsImNvbnRleHRQcm90b3R5cGUiLCJvcmlnaW5hbEZ1bmN0aW9uIiwiT2JqZWN0IiwiZ2V0UHJvdG90eXBlT2YiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJhcmd1bWVudHMiLCJpbWFnZVNtb290aGluZ0VuYWJsZWQiLCJpbWFnZVNtb290aGluZ1F1YWxpdHkiLCJhcHBseSIsImNvbnRyb2xfc2V0cyIsImNvbXBvbmVudHMiLCJmaWx0ZXJzIiwiSW1hZ2VFZGl0b3IiLCJzZXR0aW5ncyIsInBpeGVsUmF0aW8iLCJyb3VuZCIsImZsb2F0Iiwic2F2ZURhdGEiLCJzYXZlVXJsIiwidG9rZW4iLCJzdHJpY3RTaXplIiwic3RhZ2UiLCJuYW1lc3BhY2VzIiwiY29udHJvbFNldHMiLCJmaWxlSWQiLCJmSUQiLCJzY2FsZSIsImNyb3NzaGFpciIsInVuaXFpZCIsImdldENvbnRhaW5lciIsImlkIiwiZWRpdG9yQ29udGV4dCIsIiQiLCJkb21Db250ZXh0IiwiY29udHJvbENvbnRleHQiLCJjb250cm9sU2V0TmFtZXNwYWNlcyIsInNob3dMb2FkZXIiLCJmbiIsImRpYWxvZyIsImhpZGVMb2FkZXIiLCJzcmMiLCJDQ01fSU1BR0VfUEFUSCIsImNlbnRlck9mZnNldCIsImdldEVsZW0iLCJzZWxlY3RvciIsImxvZyIsImRlYnVnIiwiY29uc29sZSIsImFyZ3MiLCJlcnJvciIsIl9zZXREcmFnZ2FibGUiLCJzZXREcmFnZ2FibGUiLCJ2IiwiYmluZEV2ZW50IiwiYmluZCIsIm9uIiwiaGFuZGxlciIsImVsZW0iLCJlbGVtZW50IiwialF1ZXJ5IiwiQ29uY3JldGVFdmVudCIsInN1YiIsImZpcmVFdmVudCIsImZpcmUiLCJkYXRhIiwicHViIiwiYWRkRWxlbWVudCIsIm9iamVjdCIsIm1vdmVEb3duIiwiYWN0aXZlRWxlbWVudCIsImRvcHBlbGdhbmdlciIsImZvcmVncm91bmQiLCJzZXRQb3NpdGlvbiIsInNldEFjdGl2ZUVsZW1lbnQiLCJkZWZlciIsImZpbmQiLCJyZW1vdmVDbGFzcyIsImFsdGVyQ29yZSIsImNvbnRyb2xCYXIiLCJhdHRyIiwiem9vbSIsInpvb21JbiIsInpvb21PdXQiLCJhcHBlbmRUbyIsImNsaWNrIiwiYWRkQ2xhc3MiLCJ0ZXh0Iiwic2V0U2NhbGUiLCJwb3MiLCJnZXREcmFnQm91bmRGdW5jIiwiZ2V0WCIsImdldFkiLCJzZXRYIiwic2V0WSIsImJ1aWxkQmFja2dyb3VuZCIsImNlbnRlcngiLCJjZW50ZXJ5IiwibmNlbnRlcngiLCJuY2VudGVyeSIsInNhdmVTaXplIiwiY3JvcCIsImJvdGgiLCJhcmVhIiwiY3NzIiwiYWRqdXN0U2F2ZXJzIiwia2V5dXAiLCJwYXJzZUludCIsImlzTmFOIiwic2V0Q3Vyc29yIiwiY3Vyc29yIiwic2F2ZSIsInRvRGF0YVVSTCIsImZha2VfY2FudmFzIiwicG9zaXRpb24iLCJ0b3AiLCJsZWZ0IiwiYmFja2dyb3VuZENvbG9yIiwib2xkU3RhZ2VQb3NpdGlvbiIsIm9sZFNjYWxlIiwib2xkV2lkdGgiLCJvbGRIZWlnaHQiLCJzYXZlQXJlYSIsImJhY2tncm91bmQiLCJoaWRlIiwic2V0SGVpZ2h0Iiwic2V0V2lkdGgiLCJtaW1lIiwibWltZVR5cGUiLCJxdWFsaXR5IiwianBlZ0NvbXByZXNzaW9uIiwidXJsIiwic2hvdyIsInBvc3QiLCJfIiwiZXh0ZW5kIiwiaW1nRGF0YSIsImNjbV90b2tlbiIsInJlcyIsInJlc3VsdCIsIkpTT04iLCJwYXJzZSIsImFsZXJ0IiwibWVzc2FnZSIsIkNvbmNyZXRlIiwiZXZlbnQiLCJhY3R1YWxQb3NpdGlvbiIsImN4IiwiY3kiLCJyYWQiLCJheSIsImF4IiwiZGVnQ2hhbmdlIiwiZ2V0Um90YXRpb24iLCJhdGFuMiIsInIiLCJzcXJ0IiwicG93IiwiY29zIiwic2luIiwiZ2V0QWN0dWFsUmVjdCIsInJlY3QiLCJnZXRTY2FsZVgiLCJnZXRTY2FsZVkiLCJhdXRvQ3JvcCIsInUiLCJzaXplIiwic2NvcmUiLCJjaGlsZCIsInBvaW50IiwiYXAiLCJhZGoiLCJtYXAiLCJzZXRUaW1lb3V0IiwicHJvcGVydHkiLCJ2YWx1ZSIsIm5pbSIsIm5hbWVzcGFjZSIsInJlYWxJbSIsIm5ld2ltIiwiYWRkQ29udHJvbFNldCIsIm5zIiwianMiLCJjb250cm9sU2V0IiwiZGlzYWJsZSIsImVuYWJsZWQiLCJlbmFibGUiLCJGdW5jdGlvbiIsImNhbGwiLCJzdGFjayIsInJlcGxhY2UiLCJzcGxpdCIsImpzc3RhY2siLCJtc2ciLCJBcnJheSIsImpvaW4iLCJuc28iLCJhZGRGaWx0ZXIiLCJmaWx0ZXIiLCJ3aW5kb3ciLCJsYXN0RXJyb3IiLCJhZGRDb21wb25lbnQiLCJjb21wb25lbnQiLCJiZ2ltYWdlIiwiUmVjdCIsInNldEZpbGxQYXR0ZXJuSW1hZ2UiLCJzZXRGaWxsUGF0dGVybk9mZnNldCIsInNldEZpbGxQYXR0ZXJuU2NhbGUiLCJzZXRGaWxsUGF0dGVyblgiLCJzZXRGaWxsUGF0dGVyblkiLCJzZXRGaWxsUGF0dGVyblJlcGVhdCIsIkNDTV9SRUwiLCJkaW1lbnNpb25zIiwiY292ZXJMYXllciIsInNldFN0cm9rZSIsInNldEZpbGwiLCJzZXRMaXN0ZW5pbmciLCJzZXRTdHJva2VXaWR0aCIsInNldFNpemUiLCJzZXREcmFnQm91bmRGdW5jIiwicmV0IiwiZGltIiwibWF4eCIsIm1pbngiLCJtYXh5IiwibWlueSIsImZsb29yIiwidyIsImgiLCJwZXJjIiwiZml0Iiwid2giLCJjY21pMThuX2ltYWdlZWRpdG9yIiwibG9hZGluZ0ltYWdlIiwiY29udHJvbFNldHNMb2FkZWQiLCJjcm9zc09yaWdpbiIsImFjdGl2YXRlIiwiY3MiLCJjb250cm9sc2V0cyIsInJ1bm5pbmciLCJsb2FkaW5nQ29udHJvbFNldHMiLCJteW5zIiwiYWpheCIsImRhdGFUeXBlIiwiY2FjaGUiLCJiZWZvcmVTZW5kIiwic3VjY2VzcyIsInhociIsImVyckRlc2MiLCJleGNlcHRpb24iLCJsb2FkaW5nQ29tcG9uZW50cyIsImxvYWRpbmdGaWx0ZXJzIiwiZmlyc3RmIiwiaGFzT3duUHJvcGVydHkiLCJuYW1lIiwiYWN0aXZlQ29udHJvbFNldCIsIm9ucyIsInNsaWRlVXAiLCJzbGlkZURvd24iLCJhY3RpdmVDb21wb25lbnQiLCJzbGlkZU91dCIsIm92ZXJmbG93LXgiLCJyaWdodCIsImJveC1zaGFkb3ciLCJzbGlkZU91dENvbnRlbnRzIiwic2hvd1NsaWRlT3V0IiwiY29udGVudHMiLCJoaWRlU2xpZGVPdXQiLCJlbXB0eSIsImFwcGVuZCIsInN0b3AiLCJzbGlkZUluIiwiYWZ0ZXIiLCJjNV9pbWFnZV9lZGl0b3IiLCJpbWFnZWxvYWQiLCJzZWxmIiwiY29udGFpbmVyIiwiZWFjaCIsImhhc0NsYXNzIiwiZW5kIiwiY29uZmlybSIsImFyZVlvdVN1cmUiLCJjbG9zZVRvcCIsInRpbWUiLCJzdGFydFdpZHRoIiwiYW5pbWF0ZSIsImdyYXlzY2FsZSIsIkZpbHRlcnMiLCJHcmF5c2NhbGUiLCJzZXBpYSIsImltYWdlRGF0YSIsImJyaWdodG5lc3MiLCJvYiIsImFkanVzdG1lbnQiLCJsZXZlbCIsImQiLCJpbnZlcnQiLCJyZXN0b3JlIiwiZyJdLCJtYXBwaW5ncyI6IkFBQ0FBLFFBQVFDLEtBQUtDLFVBQVVDLFFBQVUsU0FBU0MsR0FFdEMsSUFEQSxHQUFJQyxHQUFTQyxLQUFLQyxXQUNBQyxLQUFYSCxHQUFzQixDQUN6QixHQUFJQSxFQUFPSSxXQUFhTCxFQUFNLE1BQU9DLEVBQ3JDQSxHQUFTQSxFQUFPRSxPQUVwQixPQUFPLEdBR1hQLFFBQVFVLE1BQU1SLFVBQVVTLFdBQWEsV0FDakMsR0FBOENDLEdBQTFDQyxLQUFXQyxFQUFXUixLQUFLUyxhQUMvQixLQUFLSCxFQUFJLEVBQUdBLEVBQUlFLEVBQVNFLE9BQVFKLElBQzdCQyxFQUFLSSxLQUFLSCxFQUFTRixHQUFHTSxRQUUxQixPQUFPTCxJQUVYYixRQUFRVSxNQUFNUixVQUFVaUIsZUFBaUIsV0FDckMsTUFBT0MsTUFBS0MsS0FBS2YsS0FBS2dCLFdBQWFoQixLQUFLaUIsV0FBV0MsSUFFdkR4QixRQUFRVSxNQUFNUixVQUFVdUIsZ0JBQWtCLFdBQ3RDLE1BQU9MLE1BQUtDLEtBQUtmLEtBQUtvQixZQUFjcEIsS0FBS2lCLFdBQVdJLElBRXhEM0IsUUFBUVUsTUFBTVIsVUFBVTBCLGFBQWUsV0FDbkMsTUFBT3RCLE1BQUt1QixHQUFHQyxXQUVuQjlCLFFBQVFVLE1B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LEtBQVZnSSxFQUFLaEksR0FBMkIsS0FBZGdJLEVBQUtoSSxFQUFJLEdBQTJCLEtBQWRnSSxFQUFLaEksRUFBSSxHQUNoRWdJLEVBQUtoSSxFQUFJLEdBQWdCLEtBQVZnSSxFQUFLaEksR0FBMkIsS0FBZGdJLEVBQUtoSSxFQUFJLEdBQTJCLEtBQWRnSSxFQUFLaEksRUFBSSxJQUd4RWtXLFdBQVksU0FBVUQsRUFBVUUsR0FHNUIsSUFBSyxHQUZEQyxHQUFhRCxFQUFHRSxNQUNoQkMsRUFBSUwsRUFBVWpPLEtBQ1RoSSxFQUFFLEVBQUdBLEVBQUVzVyxFQUFFbFcsT0FBUUosR0FBRyxFQUN6QnNXLEVBQUV0VyxJQUFNb1csRUFDUkUsRUFBRXRXLEVBQUUsSUFBTW9XLEVBQ1ZFLEVBQUV0VyxFQUFFLElBQU1vVyxHQUdsQkcsT0FBUSxTQUFVTixFQUFVRSxHQUV4QixJQUFLLEdBRERHLEdBQUlMLEVBQVVqTyxLQUNUaEksRUFBRSxFQUFHQSxFQUFFc1csRUFBRWxXLE9BQVFKLEdBQUcsRUFDekJzVyxFQUFFdFcsR0FBSyxJQUFNc1csRUFBRXRXLEdBQ2ZzVyxFQUFFdFcsRUFBRSxHQUFLLElBQU1zVyxFQUFFdFcsRUFBRSxHQUNuQnNXLEVBQUV0VyxFQUFFLEdBQUssSUFBTXNXLEVBQUV0VyxFQUFFLElBRzNCd1csUUFBUyxTQUFVUCxFQUFVRSxHQUl6QixJQUFLLEdBRkRHLElBRGFILEVBQUdFLE1BQ1pKLEVBQVVqTyxNQUNkeU8sRUFBSU4sRUFBR0YsVUFBVWpPLEtBQ1poSSxFQUFFLEVBQUdBLEVBQUVzVyxFQUFFbFcsT0FBUUosR0FBRyxFQUN6QnNXLEVBQUV0VyxHQUFLeVcsRUFBRXpXLEdBQ1RzVyxFQUFFdFcsRUFBRSxHQUFLeVcsRUFBRXpXLEVBQUUsR0FDYnNXLEVBQUV0VyxFQUFFLEdBQUt5VyxFQUFFelcsRUFBRSIsImZpbGUiOiJpbWFnZS1lZGl0b3IuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBnbG9iYWwgS2luZXRpYyAqL1xuS2luZXRpYy5Ob2RlLnByb3RvdHlwZS5jbG9zZXN0ID0gZnVuY3Rpb24odHlwZSkge1xuICAgIHZhciBhY3RpdmUgPSB0aGlzLnBhcmVudDtcbiAgICB3aGlsZSAoYWN0aXZlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgaWYgKGFjdGl2ZS5ub2RlVHlwZSA9PT0gdHlwZSkgcmV0dXJuIGFjdGl2ZTtcbiAgICAgICAgYWN0aXZlID0gYWN0aXZlLnBhcmVudDtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuS2luZXRpYy5TdGFnZS5wcm90b3R5cGUuY3JlYXRlQ29weSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY29weSA9IFtdLCBjaGlsZHJlbiA9IHRoaXMuZ2V0Q2hpbGRyZW4oKSwgaTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY2hpbGRyZW4ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgY29weS5wdXNoKGNoaWxkcmVuW2ldLmNsb25lKCkpO1xuICAgIH1cbiAgICByZXR1cm4gY29weTtcbn07XG5LaW5ldGljLlN0YWdlLnByb3RvdHlwZS5nZXRTY2FsZWRXaWR0aCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5nZXRXaWR0aCgpIC8gdGhpcy5nZXRTY2FsZSgpLngpO1xufTtcbktpbmV0aWMuU3RhZ2UucHJvdG90eXBlLmdldFNjYWxlZEhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy5nZXRIZWlnaHQoKSAvIHRoaXMuZ2V0U2NhbGUoKS55KTtcbn07XG5LaW5ldGljLlN0YWdlLnByb3RvdHlwZS5nZXRTYXZlV2lkdGggPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gdGhpcy5pbS5zYXZlV2lkdGg7XG59O1xuS2luZXRpYy5TdGFnZS5wcm90b3R5cGUuZ2V0U2F2ZUhlaWdodCA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB0aGlzLmltLnNhdmVIZWlnaHQ7XG59O1xuS2luZXRpYy5TdGFnZS5wcm90b3R5cGUuZ2V0VG90YWxEaW1lbnNpb25zID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIG1pblkgPSAodGhpcy5nZXRTYXZlSGVpZ2h0KCkgLyAyIC0gdGhpcy5pbS5jZW50ZXIueSkgKiB0aGlzLmdldFNjYWxlKCkueTtcbiAgICB2YXIgbWF4WSA9IG1pblkgKyB0aGlzLmdldEhlaWdodCgpIC0gKHRoaXMuZ2V0U2F2ZUhlaWdodCgpICogdGhpcy5nZXRTY2FsZSgpLnkpO1xuXG4gICAgdmFyIG1pblggPSAodGhpcy5nZXRTYXZlV2lkdGgoKSAvIDIgLSB0aGlzLmltLmNlbnRlci54KSAqIHRoaXMuZ2V0U2NhbGUoKS54O1xuICAgIHZhciBtYXhYID0gbWluWCArIHRoaXMuZ2V0V2lkdGgoKSAtICh0aGlzLmdldFNhdmVXaWR0aCgpICogdGhpcy5nZXRTY2FsZSgpLngpO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgbWluOiB7XG4gICAgICAgICAgICB4OiBtaW5YLFxuICAgICAgICAgICAgeTogbWluWVxuICAgICAgICB9LFxuICAgICAgICBtYXg6IHtcbiAgICAgICAgICAgIHg6IG1heFgsXG4gICAgICAgICAgICB5OiBtYXhZXG4gICAgICAgIH0sXG4gICAgICAgIHdpZHRoOnRoaXMuZ2V0U2NhbGVkV2lkdGgoKSxcbiAgICAgICAgaGVpZ2h0OnRoaXMuZ2V0U2NhbGVkSGVpZ2h0KCksXG4gICAgICAgIHZpc2libGVXaWR0aDpNYXRoLm1heCh0aGlzLmdldFNhdmVXaWR0aCgpLHRoaXMuZ2V0U2NhbGVkV2lkdGgoKSAqIDIgLSB0aGlzLmdldFNhdmVXaWR0aCgpKSxcbiAgICAgICAgdmlzaWJsZUhlaWdodDpNYXRoLm1heCh0aGlzLmdldFNhdmVIZWlnaHQoKSx0aGlzLmdldFNjYWxlZEhlaWdodCgpICogMiAtIHRoaXMuZ2V0U2F2ZUhlaWdodCgpKVxuICAgIH07XG59O1xuS2luZXRpYy5TdGFnZS5wcm90b3R5cGUubG9hZENvcHkgPSBmdW5jdGlvbiAoY29weSkge1xuICAgIHZhciBpO1xuICAgIHRoaXMucmVtb3ZlQ2hpbGRyZW4oKTtcbiAgICBmb3IgKGkgPSAwOyBpIDwgY29weS5sZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzLmFkZChjb3B5W2ldKTtcbiAgICB9XG4gICAgdGhpcy5kcmF3KCk7XG59O1xuS2luZXRpYy5TdGFnZS5wcm90b3R5cGUuZWxlbWVudFR5cGUgPSAnc3RhZ2UnO1xuXG5LaW5ldGljLkltYWdlLnByb3RvdHlwZS5nZXRJbWFnZURhdGEgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgY2FudmFzID0gbmV3IEtpbmV0aWMuQ2FudmFzKHRoaXMuYXR0cnMuaW1hZ2Uud2lkdGgsIHRoaXMuYXR0cnMuaW1hZ2UuaGVpZ2h0KTtcbiAgICB2YXIgY29udGV4dCA9IGNhbnZhcy5nZXRDb250ZXh0KCk7XG4gICAgY29udGV4dC5kcmF3SW1hZ2UodGhpcy5hdHRycy5pbWFnZSwgMCwgMCk7XG4gICAgdHJ5IHtcbiAgICAgICAgdmFyIGltYWdlRGF0YSA9IGNvbnRleHQuZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy5nZXRXaWR0aCgpLCBjYW52YXMuZ2V0SGVpZ2h0KCkpO1xuICAgICAgICByZXR1cm4gaW1hZ2VEYXRhO1xuICAgIH0gY2F0Y2goZSkge1xuICAgICAgICBLaW5ldGljLlV0aWwud2FybignVW5hYmxlIHRvIGdldCBpbWFnZURhdGEuJyk7XG4gICAgfVxufTtcblxuS2luZXRpYy5MYXllci5wcm90b3R5cGUuX2NhY2hlZGRyYXcgPSAobmV3IEtpbmV0aWMuTGF5ZXIpLmRyYXc7XG5LaW5ldGljLkxheWVyLnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHR5cGVvZiBpbSA9PT0gJ3VuZGVmaW5lZCcgfHwgdHlwZW9mIGltLnRyaWdnZXIgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jYWNoZWRkcmF3KCk7XG4gICAgfVxuICAgIC8vIGltLnRyaWdnZXIoJ2JlZm9yZXJlZHJhdycsdGhpcyk7XG4gICAgdmFyIGRyYXcgPSB0aGlzLl9jYWNoZWRkcmF3KCk7XG4gICAgLy8gaW0udHJpZ2dlcignYWZ0ZXJyZWRyYXcnLHRoaXMpO1xuICAgIHJldHVybiBkcmF3O1xufTtcbktpbmV0aWMuTGF5ZXIucHJvdG90eXBlLmVsZW1lbnRUeXBlID0gJ2xheWVyJztcblxuS2luZXRpYy5Hcm91cC5wcm90b3R5cGUuZWxlbWVudFR5cGUgPSAnZ3JvdXAnO1xuXG5LaW5ldGljLlRleHQucHJvdG90eXBlLnJhc3Rlcml6ZSA9IGZ1bmN0aW9uKGUpIHtcbiAgICB2YXIgbGF5ZXIgPSB0aGlzLnBhcmVudDtcbiAgICB2YXIgbWUgPSB0aGlzO1xuICAgIHRoaXMudG9JbWFnZSh7XG4gICAgICAgIGNhbGxiYWNrOmZ1bmN0aW9uKGltZyl7XG4gICAgICAgICAgICB2YXIgcmFzdGVyaXplZEltYWdlID0gbmV3IEtpbmV0aWMuSW1hZ2Uoe2ltYWdlOmltZyx4Om1lLmdldFBvc2l0aW9uKCkueCx5Om1lLmdldFBvc2l0aW9uKCkueX0pO1xuICAgICAgICAgICAgbWUucmVtb3ZlKCk7XG4gICAgICAgICAgICBsYXllci5hZGQocmFzdGVyaXplZEltYWdlKS5kcmF3KCk7XG4gICAgICAgICAgICBlLmNhbGxiYWNrKHJhc3Rlcml6ZWRJbWFnZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbn07XG4vLyBQYXRjaCB0aGUgYnJvd3NlciBkcmF3SW1hZ2UgZnVuY3Rpb25cbihmdW5jdGlvbigpIHtcbiAgICB2YXIgY29udGV4dFByb3RvdHlwZSwgb3JpZ2luYWxGdW5jdGlvbjtcbiAgICB0cnkge1xuICAgICAgICBjb250ZXh0UHJvdG90eXBlID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpLmdldENvbnRleHQoJzJkJykpO1xuICAgICAgICBvcmlnaW5hbEZ1bmN0aW9uID0gY29udGV4dFByb3RvdHlwZS5kcmF3SW1hZ2U7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBvcmlnaW5hbEZ1bmN0aW9uID0gbnVsbDtcbiAgICB9XG4gICAgaWYgKG9yaWdpbmFsRnVuY3Rpb24pIHtcbiAgICAgICAgY29udGV4dFByb3RvdHlwZS5kcmF3SW1hZ2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID49IDQpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLmltYWdlU21vb3RoaW5nUXVhbGl0eSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5pbWFnZVNtb290aGluZ1F1YWxpdHkgPSAnaGlnaCc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIG9yaWdpbmFsRnVuY3Rpb24uYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfTtcbiAgICB9XG59KSgpO1xuXG52YXIgY29udHJvbF9zZXRzID0gW10sIGNvbXBvbmVudHMgPSBbXSwgZmlsdGVycyA9IFtdO1xudmFyIEltYWdlRWRpdG9yID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG4gICAgaWYgKHNldHRpbmdzID09PSB1bmRlZmluZWQpIHJldHVybiB0aGlzO1xuICAgIHNldHRpbmdzLnBpeGVsUmF0aW8gPSAxO1xuICAgIHZhciBpbSA9IHRoaXMsIHgsIHJvdW5kID0gZnVuY3Rpb24gKGZsb2F0KSB7XG4gICAgICAgIHJldHVybiBNYXRoLnJvdW5kKGZsb2F0KVxuICAgIH07XG4gICAgaW0uc2F2ZURhdGEgPSBzZXR0aW5ncy5zYXZlRGF0YSB8fCB7fTtcbiAgICBpbS5zYXZlVXJsID0gc2V0dGluZ3Muc2F2ZVVybDtcbiAgICBpbS50b2tlbiA9IHNldHRpbmdzLnRva2VuO1xuICAgIGltLndpZHRoID0gc2V0dGluZ3Mud2lkdGg7XG4gICAgaW0uaGVpZ2h0ID0gc2V0dGluZ3MuaGVpZ2h0O1xuICAgIGltLnN0cmljdFNpemUgPSB0eXBlb2Ygc2V0dGluZ3Muc3RyaWN0U2l6ZSAhPT0gJ3VuZGVmaW5lZCcgPyAhIXNldHRpbmdzLnN0cmljdFNpemUgOiBzZXR0aW5ncy5zYXZlV2lkdGggPiAwO1xuICAgIGltLnNhdmVXaWR0aCA9IHNldHRpbmdzLnNhdmVXaWR0aCB8fCAoaW0uc3RyaWN0U2l6ZSA/IDAgOiByb3VuZChpbS53aWR0aCAvIDIpKTtcbiAgICBpbS5zYXZlSGVpZ2h0ID0gc2V0dGluZ3Muc2F2ZUhlaWdodCB8fCAoaW0uc3RyaWN0U2l6ZSA/IDAgOiByb3VuZChpbS5oZWlnaHQgLyAyKSk7XG4gICAgaW0uc3RhZ2UgPSBuZXcgS2luZXRpYy5TdGFnZShzZXR0aW5ncyk7XG4gICAgaW0ubmFtZXNwYWNlcyA9IHt9O1xuICAgIGltLmNvbnRyb2xTZXRzID0ge307XG4gICAgaW0uY29tcG9uZW50cyA9IHt9O1xuICAgIGltLnNldHRpbmdzID0gc2V0dGluZ3M7XG4gICAgaW0uZmlsdGVycyA9IHt9O1xuICAgIGltLmZpbGVJZCA9IGltLnNldHRpbmdzLmZJRDtcbiAgICBpbS5zY2FsZSA9IDE7XG4gICAgaW0uY3Jvc3NoYWlyID0gbmV3IEltYWdlKCk7XG4gICAgaW0udW5pcWlkID0gaW0uc3RhZ2UuZ2V0Q29udGFpbmVyKCkuaWQ7XG4gICAgaW0uZWRpdG9yQ29udGV4dCA9ICQoaW0uc3RhZ2UuZ2V0Q29udGFpbmVyKCkpLnBhcmVudCgpO1xuICAgIGltLmRvbUNvbnRleHQgPSBpbS5lZGl0b3JDb250ZXh0LnBhcmVudCgpO1xuICAgIGltLmNvbnRyb2xDb250ZXh0ID0gaW0uZG9tQ29udGV4dC5jaGlsZHJlbignZGl2LmNvbnRyb2xzJyk7XG4gICAgaW0uY29udHJvbFNldE5hbWVzcGFjZXMgPSBbXTtcblxuICAgIGltLnNob3dMb2FkZXIgPSAkLmZuLmRpYWxvZy5zaG93TG9hZGVyO1xuICAgIGltLmhpZGVMb2FkZXIgPSAkLmZuLmRpYWxvZy5oaWRlTG9hZGVyO1xuICAgIGltLnN0YWdlLmltID0gaW07XG4gICAgaW0uc3RhZ2UuZWxlbWVudFR5cGUgPSAnc3RhZ2UnO1xuICAgIGltLmNyb3NzaGFpci5zcmMgPSBDQ01fSU1BR0VfUEFUSCArICcvaW1hZ2VfZWRpdG9yL2Nyb3NzaGFpci5wbmcnO1xuXG4gICAgaW0uY2VudGVyID0ge1xuICAgICAgICB4OiBNYXRoLnJvdW5kKGltLndpZHRoIC8gMiksXG4gICAgICAgIHk6IE1hdGgucm91bmQoaW0uaGVpZ2h0IC8gMilcbiAgICB9O1xuXG4gICAgaW0uY2VudGVyT2Zmc2V0ID0ge1xuICAgICAgICB4OiBpbS5jZW50ZXIueCxcbiAgICAgICAgeTogaW0uY2VudGVyLnlcbiAgICB9O1xuXG4gICAgdmFyIGdldEVsZW0gPSBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgICAgICAgIHJldHVybiAkKHNlbGVjdG9yLCBpbS5kb21Db250ZXh0KTtcbiAgICAgICAgfSxcbiAgICAgICAgbG9nID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHNldHRpbmdzLmRlYnVnID09PSB0cnVlICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgIHZhciBhcmdzID0gYXJndW1lbnRzO1xuICAgICAgICAgICAgICAgIGlmIChhcmdzLmxlbmd0aCA9PSAxKSBhcmdzID0gYXJnc1swXTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgd2FybiA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5kZWJ1ZyA9PT0gdHJ1ZSAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPT0gMSkgYXJncyA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGFyZ3MpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICAgICAgICB2YXIgYXJncyA9IGFyZ3VtZW50cztcbiAgICAgICAgICAgICAgICBpZiAoYXJncy5sZW5ndGggPT0gMSkgYXJncyA9IGFyZ3NbMF07XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIkltYWdlIEVkaXRvciBFcnJvcjogXCIgKyBhcmdzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgIGltLnN0YWdlLl9zZXREcmFnZ2FibGUgPSBpbS5zdGFnZS5zZXREcmFnZ2FibGU7XG4gICAgaW0uc3RhZ2Uuc2V0RHJhZ2dhYmxlID0gZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgd2Fybignc2V0dGluZyBkcmFnZ2FibGUgdG8gJyArIHYpO1xuICAgICAgICByZXR1cm4gaW0uc3RhZ2UuX3NldERyYWdnYWJsZSh2KTtcbiAgICB9O1xuLy8gSGFuZGxlIGV2ZW50IGJpbmRpbmcuXG4gICAgaW0uYmluZEV2ZW50ID0gaW0uYmluZCA9IGltLm9uID0gZnVuY3Rpb24gKHR5cGUsIGhhbmRsZXIsIGVsZW0pIHtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSBlbGVtIHx8IGltLnN0YWdlLmdldENvbnRhaW5lcigpO1xuICAgICAgICBpZiAoZWxlbWVudCBpbnN0YW5jZW9mIGpRdWVyeSkgZWxlbWVudCA9IGVsZW1lbnRbMF07XG4gICAgICAgIENvbmNyZXRlRXZlbnQuc3ViKHR5cGUsaGFuZGxlcixlbGVtZW50KTtcbiAgICB9O1xuXG4vLyBIYW5kbGUgZXZlbnQgZmlyaW5nXG4gICAgaW0uZmlyZUV2ZW50ID0gaW0uZmlyZSA9IGltLnRyaWdnZXIgPSBmdW5jdGlvbiAodHlwZSwgZGF0YSwgZWxlbSkge1xuICAgICAgICB2YXIgZWxlbWVudCA9IGVsZW0gfHwgaW0uc3RhZ2UuZ2V0Q29udGFpbmVyKCk7XG4gICAgICAgIGlmIChlbGVtZW50IGluc3RhbmNlb2YgalF1ZXJ5KSBlbGVtZW50ID0gZWxlbWVudFswXTtcbiAgICAgICAgQ29uY3JldGVFdmVudC5wdWIodHlwZSxkYXRhLGVsZW1lbnQpO1xuICAgIH07XG4gICAgaW0uYWRkRWxlbWVudCA9IGZ1bmN0aW9uKG9iamVjdCwgdHlwZSkge1xuICAgICAgICB2YXIgbGF5ZXIgPSBuZXcgS2luZXRpYy5MYXllcigpO1xuICAgICAgICBvYmplY3QuZWxlbWVudFR5cGUgPSB0eXBlO1xuICAgICAgICBsYXllci5lbGVtZW50VHlwZSA9IHR5cGU7XG5cbiAgICAgICAgbGF5ZXIuYWRkKG9iamVjdCk7XG4gICAgICAgIGltLnN0YWdlLmFkZChsYXllcik7XG4gICAgICAgIGxheWVyLm1vdmVEb3duKCk7XG4gICAgICAgIGltLnN0YWdlLmRyYXcoKTtcbiAgICB9O1xuXG4gICAgaW0ub24oJ2JhY2tncm91bmRCdWlsdCcsZnVuY3Rpb24oKXtcbiAgICAgICAgaWYgKGltLmFjdGl2ZUVsZW1lbnQgIT09IHVuZGVmaW5lZCAmJiBpbS5hY3RpdmVFbGVtZW50LmRvcHBlbGdhbmdlciAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBpbS5mb3JlZ3JvdW5kLmFkZChpbS5hY3RpdmVFbGVtZW50LmRvcHBlbGdhbmdlcik7XG4gICAgICAgICAgICBpbS5hY3RpdmVFbGVtZW50LmRvcHBlbGdhbmdlci5zZXRQb3NpdGlvbihpbS5hY3RpdmVFbGVtZW50LmdldFBvc2l0aW9uKCkpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpbS5zZXRBY3RpdmVFbGVtZW50ID0gZnVuY3Rpb24oZWxlbWVudCkge1xuICAgICAgICBpZiAoZWxlbWVudC5kZWZlcikge1xuICAgICAgICAgICAgcmV0dXJuIGltLnNldEFjdGl2ZUVsZW1lbnQoZWxlbWVudC5kZWZlcik7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGltLmFjdGl2ZUVsZW1lbnQgPT0gZWxlbWVudCkgcmV0dXJuO1xuICAgICAgICBpZiAoaW0uYWN0aXZlRWxlbWVudCAhPT0gdW5kZWZpbmVkICYmIGltLmFjdGl2ZUVsZW1lbnQuZG9wcGVsZ2FuZ2VyICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIGltLmFjdGl2ZUVsZW1lbnQuZG9wcGVsZ2FuZ2VyLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChlbGVtZW50ID09PSBpbS5zdGFnZSB8fCBlbGVtZW50Lm5vZGVUeXBlID09ICdTdGFnZScpIHtcbiAgICAgICAgICAgIGltLnRyaWdnZXIoJ0NoYW5nZUFjdGl2ZUFjdGlvbicsIGltLmNvbnRyb2xTZXROYW1lc3BhY2VzLmxlbmd0aCA/IGltLmNvbnRyb2xTZXROYW1lc3BhY2VzWzBdIDogdW5kZWZpbmVkKTtcbiAgICAgICAgICAgICQoJ2Rpdi5jb250cm9sLXNldHMnLGltLmNvbnRyb2xDb250ZXh0KS5maW5kKCdoNC5hY3RpdmUnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoZWxlbWVudC5kb3BwZWxnYW5nZXIgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgaW0uZm9yZWdyb3VuZC5hZGQoZWxlbWVudC5kb3BwZWxnYW5nZXIpO1xuICAgICAgICAgICAgaW0uZm9yZWdyb3VuZC5kcmF3KCk7XG4gICAgICAgIH1cbiAgICAgICAgaW0udHJpZ2dlcignYmVmb3JlQ2hhbmdlQWN0aXZlRWxlbWVudCcsaW0uYWN0aXZlRWxlbWVudCk7XG4gICAgICAgIGltLmFsdGVyQ29yZSgnYWN0aXZlRWxlbWVudCcsZWxlbWVudCk7XG4gICAgICAgIGltLnRyaWdnZXIoJ2NoYW5nZUFjdGl2ZUVsZW1lbnQnLGVsZW1lbnQpO1xuICAgICAgICBpbS5zdGFnZS5kcmF3KCk7XG4gICAgfTtcbiAgICBpbS5iaW5kKCdDbGlja2VkRWxlbWVudCcsZnVuY3Rpb24oZSwgZGF0YSkge1xuICAgICAgICBpbS5zZXRBY3RpdmVFbGVtZW50KGRhdGEpO1xuICAgIH0pO1xuXG4gICAgaW0uYmluZCgnc3RhZ2VDaGFuZ2VkJyxmdW5jdGlvbihlKXtcbiAgICAgICAgaWYgKGltLmFjdGl2ZUVsZW1lbnQuZ2V0V2lkdGgoKSA+IGltLnN0YWdlLmdldFNjYWxlZFdpZHRoKCkgfHwgaW0uYWN0aXZlRWxlbWVudCAuZ2V0SGVpZ2h0KCkgPiBpbS5zdGFnZS5nZXRTY2FsZWRIZWlnaHQoKSkge1xuICAgICAgICAgICAgaW0uc2V0QWN0aXZlRWxlbWVudChpbS5zdGFnZSk7XG4gICAgICAgIH1cbiAgICB9KTtcbi8vIFpvb21cbiAgICB2YXIgY29udHJvbEJhciA9IGdldEVsZW0oaW0uc3RhZ2UuZ2V0Q29udGFpbmVyKCkpLnBhcmVudCgpLmNoaWxkcmVuKCcuYm90dG9tQmFyJyk7XG5cbiAgICBjb250cm9sQmFyLmF0dHIoJ3Vuc2VsZWN0YWJsZScsICdvbicpO1xuXG4gICAgdmFyIHpvb20gPSB7fTtcblxuICAgIHpvb20uem9vbUluID0gZ2V0RWxlbShcIjxkaXYgY2xhc3M9J2JvdHRvbWJhcmJ1dHRvbiBwbHVzJz48aSBjbGFzcz0nZmEgZmEtcGx1cyc+PC9pPjwvZGl2PlwiKTtcbiAgICB6b29tLnpvb21PdXQgPSBnZXRFbGVtKFwiPGRpdiBjbGFzcz0nYm90dG9tYmFyYnV0dG9uJz48aSBjbGFzcz0nZmEgZmEtbWludXMnPjwvaT48L2Rpdj5cIik7XG5cbiAgICB6b29tLnpvb21Jbi5hcHBlbmRUbyhjb250cm9sQmFyKTtcbiAgICB6b29tLnpvb21PdXQuYXBwZW5kVG8oY29udHJvbEJhcik7XG5cbiAgICB6b29tLnpvb21Jbi5jbGljayhmdW5jdGlvbihlKXtpbS5maXJlKCd6b29tSW5DbGljaycsZSl9KTtcbiAgICB6b29tLnpvb21PdXQuY2xpY2soZnVuY3Rpb24oZSl7aW0uZmlyZSgnem9vbU91dENsaWNrJyxlKX0pO1xuXG4gICAgdmFyIHNjYWxlID0gZ2V0RWxlbSgnPGRpdj48L2Rpdj4nKS5hZGRDbGFzcygnc2NhbGUnKS50ZXh0KCcxMDAlJyk7XG4gICAgaW0ub24oJ3NjYWxlQ2hhbmdlJyxmdW5jdGlvbihlKXtcbiAgICAgICAgc2NhbGUudGV4dChNYXRoLnJvdW5kKGltLnNjYWxlICogMTAwMDApLzEwMCArIFwiJVwiKTtcbiAgICB9KTtcbiAgICBzY2FsZS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICBpbS5zY2FsZSA9IDE7XG4gICAgICAgIGltLnN0YWdlLnNldFNjYWxlKGltLnNjYWxlKTtcbiAgICAgICAgdmFyIHBvcyA9IChpbS5zdGFnZS5nZXREcmFnQm91bmRGdW5jKCkpKHt4OmltLnN0YWdlLmdldFgoKSx5OmltLnN0YWdlLmdldFkoKX0pO1xuICAgICAgICBpbS5zdGFnZS5zZXRYKHBvcy54KTtcbiAgICAgICAgaW0uc3RhZ2Uuc2V0WShwb3MueSk7XG4gICAgICAgIGltLmZpcmUoJ3NjYWxlQ2hhbmdlJyk7XG4gICAgICAgIGltLmJ1aWxkQmFja2dyb3VuZCgpO1xuICAgICAgICBpbS5zdGFnZS5kcmF3KCk7XG4gICAgfSk7XG4gICAgc2NhbGUuYXBwZW5kVG8oY29udHJvbEJhcik7XG5cbiAgICB2YXIgbWluU2NhbGUgPSAwLCBtYXhTY2FsZSA9IDMwMDAsIHN0ZXBTY2FsZSA9IDUvNjtcblxuICAgIGltLm9uKCd6b29tSW5DbGljaycsZnVuY3Rpb24oZSl7XG4gICAgICAgIHZhciBjZW50ZXJ4ID0gKC1pbS5zdGFnZS5nZXRYKCkgKyAoaW0uc3RhZ2UuZ2V0V2lkdGgoKSAvIDIpKSAvIGltLnNjYWxlLFxuICAgICAgICAgICAgY2VudGVyeSA9ICgtaW0uc3RhZ2UuZ2V0WSgpICsgKGltLnN0YWdlLmdldEhlaWdodCgpIC8gMikpIC8gaW0uc2NhbGU7XG5cbiAgICAgICAgaW0uc2NhbGUgLz0gc3RlcFNjYWxlO1xuICAgICAgICBpbS5zY2FsZSA9IE1hdGgucm91bmQoaW0uc2NhbGUgKiAxMDAwKSAvIDEwMDA7XG4gICAgICAgIGltLmFsdGVyQ29yZSgnc2NhbGUnLGltLnNjYWxlKTtcblxuICAgICAgICB2YXIgbmNlbnRlcnggPSAoLWltLnN0YWdlLmdldFgoKSArIChpbS5zdGFnZS5nZXRXaWR0aCgpIC8gMikpIC8gaW0uc2NhbGUsXG4gICAgICAgICAgICBuY2VudGVyeSA9ICgtaW0uc3RhZ2UuZ2V0WSgpICsgKGltLnN0YWdlLmdldEhlaWdodCgpIC8gMikpIC8gaW0uc2NhbGU7XG5cbiAgICAgICAgaW0uc3RhZ2Uuc2V0WChpbS5zdGFnZS5nZXRYKCkgLSAoY2VudGVyeCAtIG5jZW50ZXJ4KSAqIGltLnNjYWxlKTtcbiAgICAgICAgaW0uc3RhZ2Uuc2V0WShpbS5zdGFnZS5nZXRZKCkgLSAoY2VudGVyeSAtIG5jZW50ZXJ5KSAqIGltLnNjYWxlKTtcblxuICAgICAgICBpbS5zdGFnZS5zZXRTY2FsZShpbS5zY2FsZSk7XG5cbiAgICAgICAgdmFyIHBvcyA9IChpbS5zdGFnZS5nZXREcmFnQm91bmRGdW5jKCkpKHt4OmltLnN0YWdlLmdldFgoKSx5OmltLnN0YWdlLmdldFkoKX0pO1xuICAgICAgICBpbS5zdGFnZS5zZXRYKHBvcy54KTtcbiAgICAgICAgaW0uc3RhZ2Uuc2V0WShwb3MueSk7XG5cbiAgICAgICAgaW0uZmlyZSgnc2NhbGVDaGFuZ2UnKTtcbiAgICAgICAgaW0uYnVpbGRCYWNrZ3JvdW5kKCk7XG4gICAgICAgIGltLnN0YWdlLmRyYXcoKTtcbiAgICB9KTtcbiAgICBpbS5vbignem9vbU91dENsaWNrJyxmdW5jdGlvbihlKXtcbiAgICAgICAgdmFyIGNlbnRlcnggPSAoLWltLnN0YWdlLmdldFgoKSArIChpbS5zdGFnZS5nZXRXaWR0aCgpIC8gMikpIC8gaW0uc2NhbGUsXG4gICAgICAgICAgICBjZW50ZXJ5ID0gKC1pbS5zdGFnZS5nZXRZKCkgKyAoaW0uc3RhZ2UuZ2V0SGVpZ2h0KCkgLyAyKSkgLyBpbS5zY2FsZTtcblxuICAgICAgICBpbS5zY2FsZSAqPSBzdGVwU2NhbGU7XG4gICAgICAgIGltLnNjYWxlID0gTWF0aC5yb3VuZChpbS5zY2FsZSAqIDEwMDApIC8gMTAwMDtcbiAgICAgICAgaW0uYWx0ZXJDb3JlKCdzY2FsZScsaW0uc2NhbGUpO1xuXG4gICAgICAgIHZhciBuY2VudGVyeCA9ICgtaW0uc3RhZ2UuZ2V0WCgpICsgKGltLnN0YWdlLmdldFdpZHRoKCkgLyAyKSkgLyBpbS5zY2FsZSxcbiAgICAgICAgICAgIG5jZW50ZXJ5ID0gKC1pbS5zdGFnZS5nZXRZKCkgKyAoaW0uc3RhZ2UuZ2V0SGVpZ2h0KCkgLyAyKSkgLyBpbS5zY2FsZTtcblxuICAgICAgICBpbS5zdGFnZS5zZXRYKGltLnN0YWdlLmdldFgoKSAtIChjZW50ZXJ4IC0gbmNlbnRlcngpICogaW0uc2NhbGUpO1xuICAgICAgICBpbS5zdGFnZS5zZXRZKGltLnN0YWdlLmdldFkoKSAtIChjZW50ZXJ5IC0gbmNlbnRlcnkpICogaW0uc2NhbGUpO1xuXG4gICAgICAgIGltLnN0YWdlLnNldFNjYWxlKGltLnNjYWxlKTtcblxuICAgICAgICB2YXIgcG9zID0gKGltLnN0YWdlLmdldERyYWdCb3VuZEZ1bmMoKSkoe3g6aW0uc3RhZ2UuZ2V0WCgpLHk6aW0uc3RhZ2UuZ2V0WSgpfSk7XG4gICAgICAgIGltLnN0YWdlLnNldFgocG9zLngpO1xuICAgICAgICBpbS5zdGFnZS5zZXRZKHBvcy55KTtcblxuICAgICAgICBpbS5maXJlKCdzY2FsZUNoYW5nZScpO1xuICAgICAgICBpbS5idWlsZEJhY2tncm91bmQoKTtcbiAgICAgICAgaW0uc3RhZ2UuZHJhdygpO1xuICAgIH0pO1xuXG4vLyBTYXZlXG4gICAgdmFyIHNhdmVTaXplID0ge307XG5cbiAgICBzYXZlU2l6ZS53aWR0aCA9IGdldEVsZW0oJzxzcGFuLz4nKS5hZGRDbGFzcygnc2F2ZVdpZHRoJyk7XG4gICAgc2F2ZVNpemUuaGVpZ2h0ID0gZ2V0RWxlbSgnPHNwYW4vPicpLmFkZENsYXNzKCdzYXZlSGVpZ2h0Jyk7XG4gICAgc2F2ZVNpemUuY3JvcCA9IGdldEVsZW0oJzxkaXY+PGkgY2xhc3M9XCJpY29uLXJlc2l6ZS1mdWxsXCIvPjwvZGl2PicpLmFkZENsYXNzKCdib3R0b21iYXJidXR0b24nKS5hZGRDbGFzcygnY3JvcCcpO1xuICAgIHNhdmVTaXplLmJvdGggPSBzYXZlU2l6ZS5oZWlnaHQuYWRkKHNhdmVTaXplLndpZHRoKS53aWR0aCgzMikuYXR0cignY29udGVudGVkaXRhYmxlJywhITEpO1xuXG4gICAgc2F2ZVNpemUuYXJlYSA9IGdldEVsZW0oJzxzcGFuLz4nKS5jc3Moe2Zsb2F0OidyaWdodCd9KTtcbiAgICAvKnNhdmVTaXplLmNyb3AuYXBwZW5kVG8oc2F2ZVNpemUuYXJlYSk7XG4gICAgc2F2ZVNpemUud2lkdGguYXBwZW5kVG8oJCgnPGRpdj53IDwvZGl2PicpLmFkZENsYXNzKCdzYXZlV2lkdGgnKS5hcHBlbmRUbyhzYXZlU2l6ZS5hcmVhKSk7XG4gICAgc2F2ZVNpemUuaGVpZ2h0LmFwcGVuZFRvKCQoJzxkaXY+aCA8L2Rpdj4nKS5hZGRDbGFzcygnc2F2ZUhlaWdodCcpLmFwcGVuZFRvKHNhdmVTaXplLmFyZWEpKTtcbiAgICBzYXZlU2l6ZS5hcmVhLmFwcGVuZFRvKGNvbnRyb2xCYXIpO1xuICAgICovXG5cbiAgICBpbS5vbignYWRqdXN0ZWRzYXZlcnMnLGZ1bmN0aW9uKCl7XG4gICAgICAgIHNhdmVTaXplLndpZHRoLnRleHQoaW0uc2F2ZVdpZHRoKTtcbiAgICAgICAgc2F2ZVNpemUuaGVpZ2h0LnRleHQoaW0uc2F2ZUhlaWdodCk7XG4gICAgfSk7XG5cbiAgICBzYXZlU2l6ZS5jcm9wLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgIGltLmFkanVzdFNhdmVycygpO1xuICAgIH0pO1xuXG4gICAgaWYgKGltLnN0cmljdFNpemUpIHtcbiAgICAgICAgc2F2ZVNpemUuYm90aC5hdHRyKCdkaXNhYmxlZCcsJ3RydWUnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBzYXZlU2l6ZS5ib3RoLmtleXVwKGZ1bmN0aW9uKGUpe1xuICAgICAgICAgICAgaW0uZmlyZSgnZWRpdGVkU2l6ZScsZSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGltLmJpbmQoJ2VkaXRlZFNpemUnLGZ1bmN0aW9uKGUpe1xuICAgICAgICBpbS5zYXZlV2lkdGggPSBwYXJzZUludChzYXZlU2l6ZS53aWR0aC50ZXh0KCkpO1xuICAgICAgICBpbS5zYXZlSGVpZ2h0ID0gcGFyc2VJbnQoc2F2ZVNpemUuaGVpZ2h0LnRleHQoKSk7XG5cbiAgICAgICAgaWYgKGlzTmFOKGltLnNhdmVXaWR0aCkpIGltLnNhdmVXaWR0aCA9IDA7XG4gICAgICAgIGlmIChpc05hTihpbS5zYXZlSGVpZ2h0KSkgaW0uc2F2ZUhlaWdodCA9IDA7XG5cbiAgICAgICAgLy9pbS50cmlnZ2VyKCdzYXZlU2l6ZUNoYW5nZScpO1xuICAgICAgICBpbS5idWlsZEJhY2tncm91bmQoKTtcbiAgICB9KTtcblxuICAgIGltLmJpbmQoJ3NhdmVTaXplQ2hhbmdlJyxmdW5jdGlvbigpe1xuICAgICAgICBzYXZlU2l6ZS53aWR0aC50ZXh0KGltLnNhdmVXaWR0aCk7XG4gICAgICAgIHNhdmVTaXplLmhlaWdodC50ZXh0KGltLnNhdmVIZWlnaHQpO1xuICAgIH0pO1xuXG4gICAgaW0uc2V0Q3Vyc29yID0gZnVuY3Rpb24oY3Vyc29yKSB7XG4gICAgICAgICQoaW0uc3RhZ2UuZ2V0Q29udGFpbmVyKCkpLmNzcygnY3Vyc29yJyxjdXJzb3IpO1xuICAgIH07XG4gICAgaW0uc2F2ZSA9IGZ1bmN0aW9uIHNhdmVJbWFnZSgpIHtcbiAgICAgICAgaW0uZmlyZSgnQ2hhbmdlQWN0aXZlQWN0aW9uJyk7XG4gICAgICAgIGltLmZpcmUoJ0ltYWdlRWRpdG9yV2lsbFNhdmUnKTtcblxuICAgICAgICAkLmZuLmRpYWxvZy5zaG93TG9hZGVyKCk7XG5cbiAgICAgICAgaW0uc3RhZ2UudG9EYXRhVVJMKHtcbiAgICAgICAgICAgIGNhbGxiYWNrOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciBmYWtlX2NhbnZhcyA9ICQoJzxpbWcgLz4nKS5hZGRDbGFzcygnZmFrZV9jYW52YXMnKS5hcHBlbmRUbyhpbS5lZGl0b3JDb250ZXh0LmNoaWxkcmVuKCcuRWRpdG9yJykpO1xuICAgICAgICAgICAgICAgIGZha2VfY2FudmFzLmF0dHIoJ3NyYycsIGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgZmFrZV9jYW52YXMuY3NzKHtcbiAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gICAgICAgICAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgICAgICAgICAgbGVmdDogMCxcbiAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZENvbG9yOiAnd2hpdGUnXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgb2xkU3RhZ2VQb3NpdGlvbiA9IGltLnN0YWdlLmdldFBvc2l0aW9uKCksXG4gICAgICAgICAgICAgICAgICAgIG9sZFNjYWxlID0gaW0uc2NhbGUsXG4gICAgICAgICAgICAgICAgICAgIG9sZFdpZHRoID0gaW0uc3RhZ2UuZ2V0V2lkdGgoKSxcbiAgICAgICAgICAgICAgICAgICAgb2xkSGVpZ2h0ID0gaW0uc3RhZ2UuZ2V0SGVpZ2h0KCk7XG5cbiAgICAgICAgICAgICAgICBpbS5zdGFnZS5zZXRQb3NpdGlvbigtaW0uc2F2ZUFyZWEuZ2V0WCgpLCAtaW0uc2F2ZUFyZWEuZ2V0WSgpKTtcbiAgICAgICAgICAgICAgICBpbS5zdGFnZS5zZXRTY2FsZSgxKTtcbiAgICAgICAgICAgICAgICBpbS5iYWNrZ3JvdW5kLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBpbS5mb3JlZ3JvdW5kLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBpbS5zdGFnZS5zZXRIZWlnaHQoaW0uc2F2ZUhlaWdodCArIDEwMCk7XG4gICAgICAgICAgICAgICAgaW0uc3RhZ2Uuc2V0V2lkdGgoaW0uc2F2ZVdpZHRoICsgMTAwKTtcbiAgICAgICAgICAgICAgICBpbS5zdGFnZS5kcmF3KCk7XG5cbiAgICAgICAgICAgICAgICB2YXIgbWltZSA9IHNldHRpbmdzLm1pbWU7XG4gICAgICAgICAgICAgICAgaWYgKG1pbWUgIT09ICdpbWFnZS9qcGVnJyAmJiBtaW1lICE9PSAnaW1hZ2UvcG5nJykge1xuICAgICAgICAgICAgICAgICAgICAvLyBkZWZhdWx0IHRvIHBuZ1xuICAgICAgICAgICAgICAgICAgICBtaW1lID0gJ2ltYWdlL3BuZyc7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaW0uc3RhZ2UudG9EYXRhVVJMKHtcbiAgICAgICAgICAgICAgICAgICAgbWltZVR5cGU6IG1pbWUsXG4gICAgICAgICAgICAgICAgICAgIHF1YWxpdHk6IHNldHRpbmdzLmpwZWdDb21wcmVzc2lvbixcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IGltLnNhdmVXaWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiBpbS5zYXZlSGVpZ2h0LFxuICAgICAgICAgICAgICAgICAgICBjYWxsYmFjazogZnVuY3Rpb24gc2F2ZUltYWdlRGF0YVVybENhbGxiYWNrKHVybCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0uc3RhZ2Uuc2V0UG9zaXRpb24ob2xkU3RhZ2VQb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5iYWNrZ3JvdW5kLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltLmZvcmVncm91bmQuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0uc3RhZ2Uuc2V0U2NhbGUob2xkU2NhbGUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0uc3RhZ2Uuc2V0SGVpZ2h0KG9sZEhlaWdodCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5zdGFnZS5zZXRXaWR0aChvbGRXaWR0aCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5zdGFnZS5kcmF3KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZha2VfY2FudmFzLnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkLnBvc3QoaW0uc2F2ZVVybCwgXy5leHRlbmQoaW0uc2F2ZURhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmSUQ6IGltLmZpbGVJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdEYXRhOiB1cmwsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2NtX3Rva2VuOiBpbS50b2tlblxuICAgICAgICAgICAgICAgICAgICAgICAgfSksIGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmZuLmRpYWxvZy5oaWRlTG9hZGVyKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IEpTT04ucGFyc2UocmVzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmVycm9yID09PSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KHJlc3VsdC5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnYnV0dG9uLnNhdmVbZGlzYWJsZWRdJykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQuZXJyb3IgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW0uZmlyZSgnSW1hZ2VFZGl0b3JEaWRTYXZlJywgXy5leHRlbmQoaW0uc2F2ZURhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZJRDogaW0uZmlsZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YTogdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uY3JldGUuZXZlbnQuZmlyZSgnSW1hZ2VFZGl0b3JEaWRTYXZlJywgXy5leHRlbmQoaW0uc2F2ZURhdGEsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZJRDogaW0uZmlsZUlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1nRGF0YTogdXJsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgaW0uYWN0dWFsUG9zaXRpb24gPSBmdW5jdGlvbiBhY3R1YWxQb3NpdGlvbih4LCB5LCBjeCwgY3ksIHJhZCkge1xuICAgICAgICB2YXIgYXkgPSB5IC0gY3ksXG4gICAgICAgICAgICBheCA9IHggLSBjeCxcbiAgICAgICAgICAgIGRlZ0NoYW5nZSA9IGltLmFjdGl2ZUVsZW1lbnQuZ2V0Um90YXRpb24oKSArIE1hdGguYXRhbjIoYXksIGF4KSxcbiAgICAgICAgICAgIHIgPSBNYXRoLnNxcnQoTWF0aC5wb3coYXgsIDIpICsgTWF0aC5wb3coYXksIDIpKTtcbiAgICAgICAgcmV0dXJuIFtjeCArIChyICogTWF0aC5jb3MoZGVnQ2hhbmdlKSksIGN5ICsgKHIgKiBNYXRoLnNpbihkZWdDaGFuZ2UpKV07XG4gICAgfTtcblxuICAgIGltLmdldEFjdHVhbFJlY3QgPSBmdW5jdGlvbiBhY3R1YWxSZWN0KGN4LCBjeSwgZWxlbSkge1xuICAgICAgICB2YXIgcmVjdCA9IFtdLCByYWQgPSBlbGVtLmdldFJvdGF0aW9uKCk7XG4gICAgICAgIHJlY3QucHVzaChpbS5hY3R1YWxQb3NpdGlvbihlbGVtLmdldFgoKSwgZWxlbS5nZXRZKCksIGN4LCBjeSwgcmFkKSk7XG4gICAgICAgIHJlY3QucHVzaChpbS5hY3R1YWxQb3NpdGlvbihlbGVtLmdldFgoKSArIGVsZW0uZ2V0V2lkdGgoKSAqIGVsZW0uZ2V0U2NhbGVYKCksIGVsZW0uZ2V0WSgpLCBjeCwgY3ksIHJhZCkpO1xuICAgICAgICByZWN0LnB1c2goaW0uYWN0dWFsUG9zaXRpb24oZWxlbS5nZXRYKCkgKyBlbGVtLmdldFdpZHRoKCkgKiBlbGVtLmdldFNjYWxlWCgpLCBlbGVtLmdldFkoKSArIGVsZW0uZ2V0SGVpZ2h0KCkgKiBlbGVtLmdldFNjYWxlWSgpLCBjeCwgY3ksIHJhZCkpO1xuICAgICAgICByZWN0LnB1c2goaW0uYWN0dWFsUG9zaXRpb24oZWxlbS5nZXRYKCksIGVsZW0uZ2V0WSgpICsgZWxlbS5nZXRIZWlnaHQoKSAqIGVsZW0uZ2V0U2NhbGVZKCksIGN4LCBjeSwgcmFkKSk7XG4gICAgICAgIHJldHVybiByZWN0O1xuICAgIH07XG5cbiAgICBpbS5hZGp1c3RTYXZlcnMgPSBmdW5jdGlvbiBBZGp1c3RpbmdTYXZlcnMoZmlyZSkge1xuICAgICAgICBpZiAoaW0uYWN0aXZlRWxlbWVudC5ub2RlVHlwZSA9PT0gJ1N0YWdlJykgcmV0dXJuO1xuICAgICAgICBpbS5mb3JlZ3JvdW5kLmF1dG9Dcm9wID0gZmFsc2U7XG4gICAgICAgIGltLmJhY2tncm91bmQuYXV0b0Nyb3AgPSBmYWxzZTtcbiAgICAgICAgdmFyIGksIGUsIHUsIHNjb3JlID0ge21pbjoge3g6IGZhbHNlLCB5OiBmYWxzZX0sIG1heDoge3g6IGZhbHNlLCB5OiBmYWxzZX19O1xuICAgICAgICAvKlxuICAgICAgICAgZm9yICh2YXIgaSA9IGltLnN0YWdlLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICB2YXIgbGF5ZXIgPSBpbS5zdGFnZS5jaGlsZHJlbltpXTtcbiAgICAgICAgIGlmIChsYXllci5hdXRvQ3JvcCA9PT0gZmFsc2UpIGNvbnRpbnVlO1xuICAgICAgICAgZm9yICh2YXIgZSA9IGxheWVyLmNoaWxkcmVuLmxlbmd0aCAtIDE7IGUgPj0gMDsgZS0tKSB7XG4gICAgICAgICB2YXIgY2hpbGQgPSBsYXllci5jaGlsZHJlbltlXSxcbiAgICAgICAgIHJlY3QgPSBpbS5nZXRBY3R1YWxSZWN0KDAsIDAsIGNoaWxkKTtcbiAgICAgICAgIGNvbnNvbGUubG9nKGNoaWxkKTtcblxuICAgICAgICAgZm9yICh2YXIgdSA9IHJlY3QubGVuZ3RoIC0gMTsgdSA+PSAwOyB1LS0pIHtcbiAgICAgICAgIHZhciBwb2ludCA9IHJlY3RbdV0sIHggPSBwb2ludFswXSArIGxheWVyLmdldFgoKSwgeSA9IHBvaW50WzFdICsgbGF5ZXIuZ2V0WSgpO1xuICAgICAgICAgaWYgKHggPiBzY29yZS5tYXgueCB8fCBzY29yZS5tYXgueCA9PT0gZmFsc2UpIHNjb3JlLm1heC54ID0geDtcbiAgICAgICAgIGlmICh4IDwgc2NvcmUubWluLnggfHwgc2NvcmUubWluLnggPT09IGZhbHNlKSBzY29yZS5taW4ueCA9IHg7XG4gICAgICAgICBpZiAoeSA+IHNjb3JlLm1heC55IHx8IHNjb3JlLm1heC55ID09PSBmYWxzZSkgc2NvcmUubWF4LnkgPSB5O1xuICAgICAgICAgaWYgKHkgPCBzY29yZS5taW4ueSB8fCBzY29yZS5taW4ueSA9PT0gZmFsc2UpIHNjb3JlLm1pbi55ID0geTtcbiAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgICAgIH1cbiAgICAgICAgICovXG4gICAgICAgIHZhciBjaGlsZCA9IGltLmFjdGl2ZUVsZW1lbnQsXG4gICAgICAgICAgICBsYXllciA9IGNoaWxkLnBhcmVudCxcbiAgICAgICAgICAgIHJlY3QgPSBpbS5nZXRBY3R1YWxSZWN0KDAsIDAsIGNoaWxkKSxcbiAgICAgICAgICAgIHUsIHNpemU7XG5cbiAgICAgICAgZm9yICh1ID0gcmVjdC5sZW5ndGggLSAxOyB1ID49IDA7IHUtLSkge1xuICAgICAgICAgICAgdmFyIHBvaW50ID0gcmVjdFt1XSwgeCA9IHBvaW50WzBdICsgbGF5ZXIuZ2V0WCgpLCB5ID0gcG9pbnRbMV0gKyBsYXllci5nZXRZKCk7XG4gICAgICAgICAgICBpZiAoeCA+IHNjb3JlLm1heC54IHx8IHNjb3JlLm1heC54ID09PSBmYWxzZSkgc2NvcmUubWF4LnggPSB4O1xuICAgICAgICAgICAgaWYgKHggPCBzY29yZS5taW4ueCB8fCBzY29yZS5taW4ueCA9PT0gZmFsc2UpIHNjb3JlLm1pbi54ID0geDtcbiAgICAgICAgICAgIGlmICh5ID4gc2NvcmUubWF4LnkgfHwgc2NvcmUubWF4LnkgPT09IGZhbHNlKSBzY29yZS5tYXgueSA9IHk7XG4gICAgICAgICAgICBpZiAoeSA8IHNjb3JlLm1pbi55IHx8IHNjb3JlLm1pbi55ID09PSBmYWxzZSkgc2NvcmUubWluLnkgPSB5O1xuICAgICAgICB9XG5cbiAgICAgICAgc2l6ZSA9IHt3aWR0aDogc2NvcmUubWF4LnggLSBzY29yZS5taW4ueCwgaGVpZ2h0OiBzY29yZS5tYXgueSAtIHNjb3JlLm1pbi55fTtcbiAgICAgICAgaWYgKCFpbS5zdHJpY3RTaXplKSB7XG4gICAgICAgICAgICBpbS5hbHRlckNvcmUoJ3NhdmVXaWR0aCcsIE1hdGgucm91bmQoc2l6ZS53aWR0aCkpO1xuICAgICAgICAgICAgaW0uYWx0ZXJDb3JlKCdzYXZlSGVpZ2h0JywgTWF0aC5yb3VuZChzaXplLmhlaWdodCkpO1xuICAgICAgICAgICAgaW0uYnVpbGRCYWNrZ3JvdW5kKCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYXAgPSBbaW0uY2VudGVyLnggLSAoaW0uYWN0aXZlRWxlbWVudC5nZXRXaWR0aCgpICogaW0uYWN0aXZlRWxlbWVudC5nZXRTY2FsZVgoKSkgLyAyLFxuICAgICAgICAgICAgICAgIGltLmNlbnRlci55IC0gKGltLmFjdGl2ZUVsZW1lbnQuZ2V0SGVpZ2h0KCkgKiBpbS5hY3RpdmVFbGVtZW50LmdldFNjYWxlWSgpKSAvIDJdLFxuICAgICAgICAgICAgYWRqID0gaW0uYWN0dWFsUG9zaXRpb24oYXBbMF0sIGFwWzFdLCBpbS5jZW50ZXIueCwgaW0uY2VudGVyLnksIGltLmFjdGl2ZUVsZW1lbnQuZ2V0Um90YXRpb24oKSk7XG5cbiAgICAgICAgaW0uYWN0aXZlRWxlbWVudC5wYXJlbnQuc2V0UG9zaXRpb24oYWRqLm1hcChNYXRoLnJvdW5kKSk7XG5cbiAgICAgICAgaWYgKGZpcmUgIT09IGZhbHNlKSBpbS5maXJlKCdhZGp1c3RlZHNhdmVycycpO1xuICAgICAgICBpbS5zdGFnZS5kcmF3KCk7XG4gICAgfTtcblxuICAgIGltLmJpbmQoJ2ltYWdlTG9hZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0VGltZW91dChpbS5hZGp1c3RTYXZlcnMsIDApO1xuICAgIH0pO1xuICAgIGltLmV4dGVuZCA9IGZ1bmN0aW9uKHByb3BlcnR5LHZhbHVlKSB7XG4gICAgICAgIHRoaXNbcHJvcGVydHldID0gdmFsdWU7XG4gICAgfTtcblxuICAgIGltLmFsdGVyQ29yZSA9IGZ1bmN0aW9uKHByb3BlcnR5LHZhbHVlKSB7XG4gICAgICAgIHZhciBuaW0gPSBpbSwgbnMgPSAnY29yZScsIGk7XG4gICAgICAgIGlmIChpbS5uYW1lc3BhY2UpIHtcbiAgICAgICAgICAgIHZhciBucyA9IG5pbS5uYW1lc3BhY2U7XG4gICAgICAgICAgICBuaW0gPSBpbS5yZWFsSW07XG4gICAgICAgIH1cbiAgICAgICAgaW1bcHJvcGVydHldID0gdmFsdWU7XG4gICAgICAgIGZvciAoaSBpbiBpbS5jb250cm9sU2V0cyl7XG4gICAgICAgICAgICBpbS5jb250cm9sU2V0c1tpXS5pbS5leHRlbmQocHJvcGVydHksdmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIGZvciAoaSBpbiBpbS5maWx0ZXJzKXtcbiAgICAgICAgICAgIGltLmZpbHRlcnNbaV0uaW0uZXh0ZW5kKHByb3BlcnR5LHZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICBmb3IgKGkgaW4gaW0uY29tcG9uZW50cyl7XG4gICAgICAgICAgICBpbS5jb21wb25lbnRzW2ldLmltLmV4dGVuZChwcm9wZXJ0eSx2YWx1ZSk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgaW0uY2xvbmUgPSBmdW5jdGlvbihuYW1lc3BhY2UpIHtcbiAgICAgICAgdmFyIG5ld2ltID0gbmV3IEltYWdlRWRpdG9yKCksaTtcbiAgICAgICAgbmV3aW0ucmVhbEltID0gaW07XG4gICAgICAgIGZvciAoaSBpbiBpbSkge1xuICAgICAgICAgICAgbmV3aW1baV0gPSBpbVtpXTtcbiAgICAgICAgfVxuICAgICAgICBuZXdpbS5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7XG4gICAgICAgIHJldHVybiBuZXdpbTtcbiAgICB9O1xuXG4gICAgaW0uYWRkQ29udHJvbFNldCA9IGZ1bmN0aW9uKG5zLGpzLGVsZW0pIHtcbiAgICAgICAgaWYgKGpRdWVyeSAmJiBlbGVtIGluc3RhbmNlb2YgalF1ZXJ5KSBlbGVtID0gZWxlbVswXTtcbiAgICAgICAgZWxlbS5jb250cm9sU2V0ID0gZnVuY3Rpb24oaW0sanMpIHtcbiAgICAgICAgICAgIGltLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpbS5lbmFibGVkID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJChlbGVtKS5wYXJlbnQoKS5wYXJlbnQoKS5hZGRDbGFzcygnZGlzYWJsZWQnKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpbS5lbmFibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBpbS5lbmFibGVkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAkKGVsZW0pLnBhcmVudCgpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIHRoaXMuaW0gPSBpbTtcbiAgICAgICAgICAgIHRoaXMuJCA9ICQ7XG4gICAgICAgICAgICB3YXJuKCdMb2FkaW5nIENvbnRyb2xTZXQnLGltKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgKG5ldyBGdW5jdGlvbignaW0nLCckJyxqcykpLmNhbGwodGhpcywgaW0sICQpO1xuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZS5zdGFjayk7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IGUuc3RhY2sucmVwbGFjZSgvW1xcU1xcc10rYXQgSFRNTERpdkVsZW1lbnQuZXZhbC4rPzxhbm9ueW1vdXM+OihcXGQrOlxcZCspW1xcU1xcc10rLywnJDEnKS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIGlmIChwb3NbMV0gJiYgIWlzTmFOKHBhcnNlSW50KHBvc1sxXSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqc3N0YWNrID0ganMuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSBcIlBhcnNlIGVycm9yIGF0IGxpbmUgI1wiK3Bvc1swXStcIiBjaGFyICNcIitwb3NbMV0rXCIgd2l0aGluIFwiK25zO1xuICAgICAgICAgICAgICAgICAgICBtc2cgKz0gXCJcXG5cIitqc3N0YWNrW3BhcnNlSW50KHBvc1swXSktMV07XG4gICAgICAgICAgICAgICAgICAgIG1zZyArPSBcIlxcblwiKyhuZXcgQXJyYXkocGFyc2VJbnQocG9zWzFdKSkuam9pbihcIiBcIikpK1wiXlwiO1xuICAgICAgICAgICAgICAgICAgICBlcnJvcihtc2cpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yKFwiXFxcIlwiICsgZS5tZXNzYWdlICsgXCJcXFwiIGluIFxcXCJcIiArIGltLm5hbWVzcGFjZSArIFwiXFxcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG5ld2ltID0gaW0uY2xvbmUobnMpO1xuICAgICAgICB2YXIgbnNvID0gZWxlbS5jb250cm9sU2V0LmNhbGwoZWxlbSxuZXdpbSxqcyk7XG4gICAgICAgIGltLmNvbnRyb2xTZXRzW25zXSA9IG5zbztcbiAgICAgICAgcmV0dXJuIG5zbztcbiAgICB9O1xuXG4gICAgaW0uYWRkRmlsdGVyID0gZnVuY3Rpb24obnMsanMpIHtcbiAgICAgICAgdmFyIGZpbHRlciA9IGZ1bmN0aW9uKGltLGpzKSB7XG4gICAgICAgICAgICB0aGlzLm5hbWVzcGFjZSA9IGltLm5hbWVzcGFjZTtcbiAgICAgICAgICAgIHRoaXMuaW0gPSBpbTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgKG5ldyBGdW5jdGlvbignaW0nLCckJyxqcykpLmNhbGwodGhpcywgaW0sICQpO1xuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgZXJyb3IoZSk7XG4gICAgICAgICAgICAgICAgd2luZG93Lmxhc3RFcnJvciA9IGU7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IGUuc3RhY2sucmVwbGFjZSgvW1xcU1xcc10rYXQgSFRNTERpdkVsZW1lbnQuZXZhbC4rPzxhbm9ueW1vdXM+OihcXGQrOlxcZCspW1xcU1xcc10rLywnJDEnKS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIGlmIChwb3MubGVuZ3RoICE9IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZS5tZXNzYWdlKTtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IoZS5zdGFjayk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGpzc3RhY2sgPSBqcy5zcGxpdChcIlxcblwiKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG1zZyA9IFwiUGFyc2UgZXJyb3IgYXQgbGluZSAjXCIrcG9zWzBdK1wiIGNoYXIgI1wiK3Bvc1sxXStcIiB3aXRoaW4gXCIrbnM7XG4gICAgICAgICAgICAgICAgICAgIG1zZyArPSBcIlxcblwiK2pzc3RhY2tbcGFyc2VJbnQocG9zWzBdKS0xXTtcbiAgICAgICAgICAgICAgICAgICAgbXNnICs9IFwiXFxuXCIrKG5ldyBBcnJheShwYXJzZUludChwb3NbMV0pIHx8IDApLmpvaW4oXCIgXCIpKStcIl5cIjtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IobXNnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG5ld2ltID0gaW0uY2xvbmUobnMpO1xuICAgICAgICB2YXIgbnNvID0gbmV3IGZpbHRlcihuZXdpbSxqcyk7XG4gICAgICAgIGltLmZpbHRlcnNbbnNdID0gbnNvO1xuICAgICAgICByZXR1cm4gbnNvO1xuICAgIH07XG5cbiAgICBpbS5hZGRDb21wb25lbnQgPSBmdW5jdGlvbihucyxqcyxlbGVtKSB7XG4gICAgICAgIGlmIChqUXVlcnkgJiYgZWxlbSBpbnN0YW5jZW9mIGpRdWVyeSkgZWxlbSA9IGVsZW1bMF07XG4gICAgICAgIGVsZW0uY29tcG9uZW50ID0gZnVuY3Rpb24oaW0sanMpIHtcbiAgICAgICAgICAgIGltLmRpc2FibGUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnBhcmVudCgpLmFkZENsYXNzKCdkaXNhYmxlZCcpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIGltLmVuYWJsZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2Rpc2FibGVkJyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgdGhpcy5pbSA9IGltO1xuICAgICAgICAgICAgd2FybignTG9hZGluZyBjb21wb25lbnQnLGltKTtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgKG5ldyBGdW5jdGlvbignaW0nLCckJyxqcykpLmNhbGwodGhpcywgaW0sICQpO1xuICAgICAgICAgICAgfSBjYXRjaChlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHBvcyA9IGUuc3RhY2sucmVwbGFjZSgvW1xcU1xcc10rYXQgSFRNTERpdkVsZW1lbnQuZXZhbC4rPzxhbm9ueW1vdXM+OihcXGQrOlxcZCspW1xcU1xcc10rLywnJDEnKS5zcGxpdCgnOicpO1xuICAgICAgICAgICAgICAgIGlmIChwb3NbMV0gJiYgIWlzTmFOKHBhcnNlSW50KHBvc1sxXSkpKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBqc3N0YWNrID0ganMuc3BsaXQoXCJcXG5cIik7XG4gICAgICAgICAgICAgICAgICAgIHZhciBtc2cgPSBcIlBhcnNlIGVycm9yIGF0IGxpbmUgI1wiK3Bvc1swXStcIiBjaGFyICNcIitwb3NbMV0rXCIgd2l0aGluIFwiK25zO1xuICAgICAgICAgICAgICAgICAgICBtc2cgKz0gXCJcXG5cIitqc3N0YWNrW3BhcnNlSW50KHBvc1swXSktMV07XG4gICAgICAgICAgICAgICAgICAgIG1zZyArPSBcIlxcblwiKyhuZXcgQXJyYXkocGFyc2VJbnQocG9zWzFdKSkuam9pbihcIiBcIikpK1wiXlwiO1xuICAgICAgICAgICAgICAgICAgICBlcnJvcihtc2cpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yKFwiXFxcIlwiICsgZS5tZXNzYWdlICsgXCJcXFwiIGluIFxcXCJcIiArIGltLm5hbWVzcGFjZSArIFwiXFxcIlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICAgICAgdmFyIG5ld2ltID0gaW0uY2xvbmUobnMpO1xuICAgICAgICB2YXIgbnNvID0gZWxlbS5jb21wb25lbnQuY2FsbChlbGVtLG5ld2ltLGpzKTtcbiAgICAgICAgaW0uY29tcG9uZW50c1tuc10gPSBuc287XG4gICAgICAgIHJldHVybiBuc287XG4gICAgfTtcbi8vIFNldCB1cCBiYWNrZ3JvdW5kXG4gICAgaW0uYmFja2dyb3VuZCA9IG5ldyBLaW5ldGljLkxheWVyKCk7XG4gICAgaW0uZm9yZWdyb3VuZCA9IG5ldyBLaW5ldGljLkxheWVyKCk7XG4gICAgaW0uc3RhZ2UuYWRkKGltLmJhY2tncm91bmQpO1xuICAgIGltLnN0YWdlLmFkZChpbS5mb3JlZ3JvdW5kKTtcbiAgICBpbS5iZ2ltYWdlID0gbmV3IEltYWdlKCk7XG4gICAgaW0uc2F2ZUFyZWEgPSBuZXcgS2luZXRpYy5SZWN0KCk7XG4gICAgaW0uYmFja2dyb3VuZC5hZGQoaW0uc2F2ZUFyZWEpO1xuICAgIGltLmJpbmQoJ2xvYWQnLCBmdW5jdGlvbigpe1xuICAgICAgICBpbS5zYXZlQXJlYS5zZXRGaWxsUGF0dGVybkltYWdlKGltLmJnaW1hZ2UpO1xuXG4gICAgICAgIGltLnNhdmVBcmVhLnNldEZpbGxQYXR0ZXJuT2Zmc2V0KFstKGltLnNhdmVXaWR0aC8yKSwtKGltLnNhdmVIZWlnaHQvMildKTtcbiAgICAgICAgaW0uc2F2ZUFyZWEuc2V0RmlsbFBhdHRlcm5TY2FsZSgxL2ltLnNjYWxlKTtcbiAgICAgICAgaW0uc2F2ZUFyZWEuc2V0RmlsbFBhdHRlcm5YKDApO1xuICAgICAgICBpbS5zYXZlQXJlYS5zZXRGaWxsUGF0dGVyblkoMCk7XG4gICAgICAgIGltLnNhdmVBcmVhLnNldEZpbGxQYXR0ZXJuUmVwZWF0KCdyZXBlYXQnKTtcblxuICAgICAgICBpbS5iYWNrZ3JvdW5kLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGltLnNldEFjdGl2ZUVsZW1lbnQoaW0uc3RhZ2UpO1xuICAgICAgICB9KTtcbiAgICB9LCBpbS5iZ2ltYWdlKTtcbiAgICBpbS5iZ2ltYWdlLnNyYyA9IENDTV9SRUwgKyAnL2NvbmNyZXRlL2ltYWdlcy90ZXN0YmcucG5nJztcbiAgICBpbS5idWlsZEJhY2tncm91bmQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGRpbWVuc2lvbnMgPSBpbS5zdGFnZS5nZXRUb3RhbERpbWVuc2lvbnMoKTtcblxuICAgICAgICBpbS5zYXZlQXJlYS5zZXRGaWxsUGF0dGVybk9mZnNldChbLShpbS5zYXZlV2lkdGgvMikgKiBpbS5zY2FsZSwtKGltLnNhdmVIZWlnaHQvMikgKiBpbS5zY2FsZV0pO1xuICAgICAgICBpbS5zYXZlQXJlYS5zZXRYKE1hdGgucm91bmQoaW0uY2VudGVyLnggLSAoaW0uc2F2ZVdpZHRoIC8gMikpKTtcbiAgICAgICAgaW0uc2F2ZUFyZWEuc2V0WShNYXRoLnJvdW5kKGltLmNlbnRlci55IC0gKGltLnNhdmVIZWlnaHQgLyAyKSkpO1xuICAgICAgICBpbS5zYXZlQXJlYS5zZXRGaWxsUGF0dGVyblNjYWxlKDEvaW0uc2NhbGUpO1xuICAgICAgICBpbS5zYXZlQXJlYS5zZXRXaWR0aChpbS5zYXZlV2lkdGgpO1xuICAgICAgICBpbS5zYXZlQXJlYS5zZXRIZWlnaHQoaW0uc2F2ZUhlaWdodCk7XG5cbiAgICAgICAgaWYgKCFpbS5jb3ZlckxheWVyKSB7XG4gICAgICAgICAgICBpbS5jb3ZlckxheWVyID0gbmV3IEtpbmV0aWMuUmVjdDtcbiAgICAgICAgICAgIGltLmNvdmVyTGF5ZXIuc2V0U3Ryb2tlKCdyZ2JhKDE1MCwxNTAsMTUwLC41KScpO1xuICAgICAgICAgICAgaW0uY292ZXJMYXllci5zZXRGaWxsKCd0cmFuc3BhcmVudCcpO1xuICAgICAgICAgICAgaW0uY292ZXJMYXllci5zZXRMaXN0ZW5pbmcoZmFsc2UpO1xuICAgICAgICAgICAgaW0uY292ZXJMYXllci5zZXRTdHJva2VXaWR0aChNYXRoLm1heChkaW1lbnNpb25zLndpZHRoLGRpbWVuc2lvbnMuaGVpZ2h0LDUwMCkpO1xuICAgICAgICAgICAgaW0uZm9yZWdyb3VuZC5hZGQoaW0uY292ZXJMYXllcik7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIHdpZHRoID0gTWF0aC5tYXgoZGltZW5zaW9ucy53aWR0aCxkaW1lbnNpb25zLmhlaWdodCkqMjtcbiAgICAgICAgaW0uY292ZXJMYXllci5zZXRQb3NpdGlvbihpbS5zYXZlQXJlYS5nZXRYKCkgLSB3aWR0aCAvIDIsIGltLnNhdmVBcmVhLmdldFkoKSAtIHdpZHRoIC8gMik7XG4gICAgICAgIGltLmNvdmVyTGF5ZXIuc2V0U2l6ZShpbS5zYXZlQXJlYS5nZXRXaWR0aCgpICsgd2lkdGgsIGltLnNhdmVBcmVhLmdldEhlaWdodCgpICsgd2lkdGgpO1xuICAgICAgICBpbS5jb3ZlckxheWVyLnNldFN0cm9rZVdpZHRoKHdpZHRoKTtcbiAgICAgICAgaW0uZmlyZSgnYmFja2dyb3VuZEJ1aWx0Jyk7XG4gICAgICAgIC8vaW0uZm9yZWdyb3VuZC5tb3ZlVG9Ub3AoKTtcbiAgICAgICAgaW0uc2F2ZUFyZWEuZHJhdygpO1xuICAgICAgICBpbS5jb3ZlckxheWVyLmRyYXcoKTtcbiAgICB9O1xuXG4gICAgaW0uYnVpbGRCYWNrZ3JvdW5kKCk7XG4gICAgaW0ub24oJ3N0YWdlQ2hhbmdlZCcsaW0uYnVpbGRCYWNrZ3JvdW5kKTtcbiAgICBpbS5zdGFnZS5zZXREcmFnQm91bmRGdW5jKGZ1bmN0aW9uIChyZXQpIHtcbiAgICAgICAgdmFyIGRpbSA9IGltLnN0YWdlLmdldFRvdGFsRGltZW5zaW9ucygpO1xuXG4gICAgICAgIHZhciBtYXh4ID0gTWF0aC5tYXgoZGltLm1heC54LCBkaW0ubWluLngpICsgMTAwLFxuICAgICAgICAgICAgbWlueCA9IE1hdGgubWluKGRpbS5tYXgueCwgZGltLm1pbi54KSAtIDEwMCxcbiAgICAgICAgICAgIG1heHkgPSBNYXRoLm1heChkaW0ubWF4LnksIGRpbS5taW4ueSkgKyAxMDAsXG4gICAgICAgICAgICBtaW55ID0gTWF0aC5taW4oZGltLm1heC55LCBkaW0ubWluLnkpIC0gMTAwO1xuXG4gICAgICAgIHJldC54ID0gTWF0aC5mbG9vcihyZXQueCk7XG4gICAgICAgIHJldC55ID0gTWF0aC5mbG9vcihyZXQueSk7XG5cbiAgICAgICAgaWYgKHJldC54ID4gbWF4eCkgcmV0LnggPSBtYXh4O1xuICAgICAgICBpZiAocmV0LnggPCBtaW54KSByZXQueCA9IG1pbng7XG4gICAgICAgIGlmIChyZXQueSA+IG1heHkpIHJldC55ID0gbWF4eTtcbiAgICAgICAgaWYgKHJldC55IDwgbWlueSkgcmV0LnkgPSBtaW55O1xuXG4gICAgICAgIHJldC54ID0gTWF0aC5mbG9vcihyZXQueCk7XG4gICAgICAgIHJldC55ID0gTWF0aC5mbG9vcihyZXQueSk7XG5cbiAgICAgICAgcmV0dXJuIHJldDtcbiAgICB9KTtcbiAgICBpbS5zZXRBY3RpdmVFbGVtZW50KGltLnN0YWdlKTtcbiAgICBpbS5zdGFnZS5zZXREcmFnZ2FibGUodHJ1ZSk7XG4gICAgaW0uYXV0b0Nyb3AgPSB0cnVlO1xuICAgIGltLm9uKCdpbWFnZUxvYWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBwYWRkaW5nID0gNTA7XG5cbiAgICAgICAgdmFyIHcgPSBpbS5zdGFnZS5nZXRXaWR0aCgpIC0gKHBhZGRpbmcgKiAyKSwgaCA9IGltLnN0YWdlLmdldEhlaWdodCgpIC0gKHBhZGRpbmcgKiAyKTtcbiAgICAgICAgaWYgKGltLnNhdmVXaWR0aCA8IHcgJiYgaW0uc2F2ZUhlaWdodCA8IGgpIHJldHVybjtcbiAgICAgICAgdmFyIHBlcmMgPSBNYXRoLm1heChpbS5zYXZlV2lkdGggLyB3LCBpbS5zYXZlSGVpZ2h0IC8gaCk7XG5cbiAgICAgICAgaW0uc2NhbGUgPSAxIC8gcGVyYztcbiAgICAgICAgaW0uc2NhbGUgPSBNYXRoLnJvdW5kKGltLnNjYWxlICogMTAwKSAvIDEwMDtcbiAgICAgICAgaW0uYWx0ZXJDb3JlKCdzY2FsZScsIGltLnNjYWxlKTtcblxuICAgICAgICBpbS5zdGFnZS5zZXRTY2FsZShpbS5zY2FsZSk7XG4gICAgICAgIGltLnN0YWdlLnNldFgoKGltLnN0YWdlLmdldFdpZHRoKCkgLSAoaW0uc3RhZ2UuZ2V0V2lkdGgoKSAqIGltLnN0YWdlLmdldFNjYWxlKCkueCkpIC8gMik7XG4gICAgICAgIGltLnN0YWdlLnNldFkoKGltLnN0YWdlLmdldEhlaWdodCgpIC0gKGltLnN0YWdlLmdldEhlaWdodCgpICogaW0uc3RhZ2UuZ2V0U2NhbGUoKS55KSkgLyAyKTtcblxuICAgICAgICB2YXIgcG9zID0gKGltLnN0YWdlLmdldERyYWdCb3VuZEZ1bmMoKSkoe3g6IGltLnN0YWdlLmdldFgoKSwgeTogaW0uc3RhZ2UuZ2V0WSgpfSk7XG4gICAgICAgIGltLnN0YWdlLnNldFgocG9zLngpO1xuICAgICAgICBpbS5zdGFnZS5zZXRZKHBvcy55KTtcblxuICAgICAgICBpbS5maXJlKCdzY2FsZUNoYW5nZScpO1xuICAgICAgICBpbS5maXJlKCdzdGFnZUNoYW5nZWQnKTtcbiAgICAgICAgaW0uYnVpbGRCYWNrZ3JvdW5kKCk7XG4gICAgfSk7XG5cbiAgICBpbS5maXQgPSBmdW5jdGlvbiAod2gsIHNjYWxlKSB7XG4gICAgICAgIGlmIChzY2FsZSA9PT0gZmFsc2UpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgd2lkdGg6IGltLnNhdmVXaWR0aCxcbiAgICAgICAgICAgICAgICBoZWlnaHQ6IGltLnNhdmVIZWlnaHRcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGhlaWdodCA9IHdoLmhlaWdodCxcbiAgICAgICAgICAgIHdpZHRoID0gd2gud2lkdGg7XG5cbiAgICAgICAgaWYgKHdpZHRoID4gaW0uc2F2ZVdpZHRoKSB7XG4gICAgICAgICAgICBoZWlnaHQgLz0gd2lkdGggLyBpbS5zYXZlV2lkdGg7XG4gICAgICAgICAgICB3aWR0aCA9IGltLnNhdmVXaWR0aDtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaGVpZ2h0ID4gaW0uc2F2ZUhlaWdodCkge1xuICAgICAgICAgICAgd2lkdGggLz0gaGVpZ2h0IC8gaW0uc2F2ZUhlaWdodDtcbiAgICAgICAgICAgIGhlaWdodCA9IGltLnNhdmVIZWlnaHQ7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHt3aWR0aDogd2lkdGgsIGhlaWdodDogaGVpZ2h0fTtcbiAgICB9O1xuICAgIGlmIChzZXR0aW5ncy5zcmMpIHtcbiAgICAgICAgaW0uc2hvd0xvYWRlcihjY21pMThuX2ltYWdlZWRpdG9yLmxvYWRpbmdJbWFnZSk7XG4gICAgICAgIHZhciBpbWcgPSBuZXcgSW1hZ2UoKSwgY29udHJvbFNldHNMb2FkZWQgPSBmYWxzZTtcblxuICAgICAgICBpbWcuY3Jvc3NPcmlnaW4gPSAnQW5vbnltb3VzJ1xuXG4gICAgICAgIGltLmJpbmQoJ0NvbnRyb2xTZXRzTG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29udHJvbFNldHNMb2FkZWQgPSB0cnVlO1xuICAgICAgICB9KTtcblxuICAgICAgICBpbS5iaW5kKCdsb2FkJywgZnVuY3Rpb24gaW1hZ2VMb2FkZWQoKSB7XG4gICAgICAgICAgICBpZiAoIWltLnN0cmljdFNpemUpIHtcbiAgICAgICAgICAgICAgICBpbS5zYXZlV2lkdGggPSBpbWcud2lkdGg7XG4gICAgICAgICAgICAgICAgaW0uc2F2ZUhlaWdodCA9IGltZy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgaW0uZmlyZSgnc2F2ZVNpemVDaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICBpbS5idWlsZEJhY2tncm91bmQoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoaW0uc2F2ZVdpZHRoID09IDAgfHwgaW0uc2F2ZUhlaWdodCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgaWYgKGltLnNhdmVXaWR0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpbS5zYXZlSGVpZ2h0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltLnNhdmVXaWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltLnNhdmVIZWlnaHQgPSBpbWcuaGVpZ2h0O1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5maXJlKCdzYXZlU2l6ZUNoYW5nZScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0uYnVpbGRCYWNrZ3JvdW5kKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpbS5zYXZlV2lkdGggPSBNYXRoLmZsb29yKGltZy53aWR0aCAvIGltZy5oZWlnaHQgKiBpbS5zYXZlSGVpZ2h0KTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaW0uZmlyZSgnc2F2ZVNpemVDaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltLmJ1aWxkQmFja2dyb3VuZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpbS5zYXZlSGVpZ2h0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaW0uc2F2ZUhlaWdodCA9IE1hdGguZmxvb3IoaW1nLmhlaWdodCAvIGltZy53aWR0aCAqIGltLnNhdmVXaWR0aCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaW0uZmlyZSgnc2F2ZVNpemVDaGFuZ2UnKTtcbiAgICAgICAgICAgICAgICAgICAgaW0uYnVpbGRCYWNrZ3JvdW5kKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFyIGNlbnRlciA9IHtcbiAgICAgICAgICAgICAgICB4OiBNYXRoLmZsb29yKGltLmNlbnRlci54IC0gKGltZy53aWR0aCAvIDIpKSxcbiAgICAgICAgICAgICAgICB5OiBNYXRoLmZsb29yKGltLmNlbnRlci55IC0gKGltZy5oZWlnaHQgLyAyKSlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICB2YXIgaW1hZ2UgPSBuZXcgS2luZXRpYy5JbWFnZSh7XG4gICAgICAgICAgICAgICAgaW1hZ2U6IGltZyxcbiAgICAgICAgICAgICAgICB4OiAwLFxuICAgICAgICAgICAgICAgIHk6IDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaW1hZ2Uuc2V0UG9zaXRpb24oY2VudGVyKTtcbiAgICAgICAgICAgIGltLmFkZEVsZW1lbnQoaW1hZ2UsICdpbWFnZScpO1xuICAgICAgICAgICAgXy5kZWZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgaW0uZmlyZSgnaW1hZ2Vsb2FkJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICAgICAgICAgIF8uZGVmZXIoZnVuY3Rpb24gYWN0aXZhdGVJbWFnZUVsZW1lbnQoKSB7XG4gICAgICAgICAgICAgICAgICAgIGltLnN0YWdlLmRyYXcoKTtcbiAgICAgICAgICAgICAgICAgICAgaW0uc2V0QWN0aXZlRWxlbWVudChpbWFnZSk7XG4gICAgICAgICAgICAgICAgICAgIGltLmZpcmUoJ2NoYW5nZUFjdGl2ZUFjdGlvbicsIGltLmNvbnRyb2xTZXROYW1lc3BhY2VzWzBdKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbnRyb2xTZXRzTG9hZGVkKSB7XG4gICAgICAgICAgICAgICAgYWN0aXZhdGUoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaW0uYmluZCgnQ29udHJvbFNldHNMb2FkZWQnLCBhY3RpdmF0ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sIGltZyk7XG5cbiAgICAgICAgaW1nLnNyYyA9IHNldHRpbmdzLnNyYztcbiAgICB9IGVsc2Uge1xuICAgICAgICBpbS5maXJlKCdpbWFnZWxvYWQnKTtcbiAgICB9XG4gICAgaW0uYmluZCgnaW1hZ2Vsb2FkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgY3MgPSBzZXR0aW5ncy5jb250cm9sc2V0cyB8fCB7fSwgZmlsdGVycyA9IHNldHRpbmdzLmZpbHRlcnMgfHwge30sIG5hbWVzcGFjZSwgZmlyc3RjcztcbiAgICAgICAgdmFyIHJ1bm5pbmcgPSAwO1xuICAgICAgICBsb2coJ0xvYWRpbmcgQ29udHJvbFNldHMnKTtcbiAgICAgICAgaW0uc2hvd0xvYWRlcihjY21pMThuX2ltYWdlZWRpdG9yLmxvYWRpbmdDb250cm9sU2V0cyk7XG4gICAgICAgIGltLmZpcmUoJ0xvYWRpbmdDb250cm9sU2V0cycpO1xuICAgICAgICBmb3IgKG5hbWVzcGFjZSBpbiBjcykge1xuICAgICAgICAgICAgdmFyIG15bnMgPSBcIkNvbnRyb2xTZXRfXCIgKyBuYW1lc3BhY2U7XG4gICAgICAgICAgICBpbS5jb250cm9sU2V0TmFtZXNwYWNlcy5wdXNoKG15bnMpO1xuICAgICAgICAgICAgJC5hamF4KGNzW25hbWVzcGFjZV1bJ3NyYyddLCB7XG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UsXG4gICAgICAgICAgICAgICAgbXluczogbXlucyxcbiAgICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmcrKztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqcykge1xuICAgICAgICAgICAgICAgICAgICBydW5uaW5nLS07XG4gICAgICAgICAgICAgICAgICAgIHZhciBuc28gPSBpbS5hZGRDb250cm9sU2V0KHRoaXMubXlucywganMsIGNzW3RoaXMubmFtZXNwYWNlXVsnZWxlbWVudCddKTtcbiAgICAgICAgICAgICAgICAgICAgbG9nKG5zbyk7XG4gICAgICAgICAgICAgICAgICAgIGltLmZpcmUoJ2NvbnRyb2xTZXRMb2FkJywgbnNvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gcnVubmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0udHJpZ2dlcignQ29udHJvbFNldHNMb2FkZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIGVyckRlc2MsIGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICBydW5uaW5nLS07XG4gICAgICAgICAgICAgICAgICAgIGlmICgwID09IHJ1bm5pbmcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGltLnRyaWdnZXIoJ0NvbnRyb2xTZXRzTG9hZGVkJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGltLmJpbmQoJ0NvbnRyb2xTZXRzTG9hZGVkJywgZnVuY3Rpb24gKCkge1xuICAgICAgICBpbS5maXJlKCdMb2FkaW5nQ29tcG9uZW50cycpO1xuICAgICAgICBpbS5zaG93TG9hZGVyKGNjbWkxOG5faW1hZ2VlZGl0b3IubG9hZGluZ0NvbXBvbmVudHMpO1xuICAgICAgICB2YXIgY29tcG9uZW50cyA9IHNldHRpbmdzLmNvbXBvbmVudHMgfHwge30sIG5hbWVzcGFjZSwgcnVubmluZyA9IDA7XG4gICAgICAgIGxvZygnTG9hZGluZyBDb21wb25lbnRzJyk7XG5cbiAgICAgICAgZm9yIChuYW1lc3BhY2UgaW4gY29tcG9uZW50cykge1xuICAgICAgICAgICAgdmFyIG15bnMgPSBcIkNvbXBvbmVudF9cIiArIG5hbWVzcGFjZTtcbiAgICAgICAgICAgICQuYWpheChjb21wb25lbnRzW25hbWVzcGFjZV1bJ3NyYyddLCB7XG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICd0ZXh0JyxcbiAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UsXG4gICAgICAgICAgICAgICAgbXluczogbXlucyxcbiAgICAgICAgICAgICAgICBiZWZvcmVTZW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmcrKztcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChqcykge1xuICAgICAgICAgICAgICAgICAgICBydW5uaW5nLS07XG4gICAgICAgICAgICAgICAgICAgIHZhciBuc28gPSBpbS5hZGRDb21wb25lbnQodGhpcy5teW5zLCBqcywgY29tcG9uZW50c1t0aGlzLm5hbWVzcGFjZV1bJ2VsZW1lbnQnXSk7XG4gICAgICAgICAgICAgICAgICAgIGxvZyhuc28pO1xuICAgICAgICAgICAgICAgICAgICBpbS5maXJlKCdDb21wb25lbnRMb2FkJywgbnNvKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gcnVubmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0udHJpZ2dlcignQ29tcG9uZW50c0xvYWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgZXJyRGVzYywgZXhjZXB0aW9uKSB7XG4gICAgICAgICAgICAgICAgICAgIHJ1bm5pbmctLTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKDAgPT0gcnVubmluZykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaW0udHJpZ2dlcignQ29tcG9uZW50c0xvYWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKDAgPT0gcnVubmluZykge1xuICAgICAgICAgICAgaW0udHJpZ2dlcignQ29tcG9uZW50c0xvYWRlZCcpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpbS5iaW5kKCdDb21wb25lbnRzTG9hZGVkJywgZnVuY3Rpb24gKCkgeyAvLyBkbyB0aGlzIHdoZW4gdGhlIGNvbnRyb2wgc2V0cyBmaW5pc2ggbG9hZGluZy5cbiAgICAgICAgbG9nKCdMb2FkaW5nIEZpbHRlcnMnKTtcbiAgICAgICAgaW0uc2hvd0xvYWRlcihjY21pMThuX2ltYWdlZWRpdG9yLmxvYWRpbmdGaWx0ZXJzKTtcbiAgICAgICAgdmFyIGZpbHRlcnMgPSBzZXR0aW5ncy5maWx0ZXJzIHx8IHt9LCBuYW1lc3BhY2UsIGZpcnN0ZiwgYWN0aXZlID0gMDtcbiAgICAgICAgaW0uZmlyZSgnTG9hZGluZ0ZpbHRlcnMnKTtcbiAgICAgICAgZm9yIChuYW1lc3BhY2UgaW4gZmlsdGVycykge1xuICAgICAgICAgICAgaWYgKGZpbHRlcnMuaGFzT3duUHJvcGVydHkobmFtZXNwYWNlKSkge1xuICAgICAgICAgICAgICAgIChmdW5jdGlvbihuYW1lc3BhY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gXy5jbG9uZShmaWx0ZXJzW25hbWVzcGFjZV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgbXlucyA9IFwiRmlsdGVyX1wiICsgbmFtZXNwYWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IHNldHRpbmdzLm5hbWU7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaXJzdGYpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0ZiA9IG15bnM7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBhY3RpdmUrKztcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KGZpbHRlcnNbbmFtZXNwYWNlXS5zcmMsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAndGV4dCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWNoZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG15bnM6IG15bnMsXG4gICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGpzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5zbyA9IGltLmFkZEZpbHRlcih0aGlzLm15bnMsIGpzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuc28ubmFtZSA9IHRoaXMubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuc28uc2V0dGluZ3MgPSBzZXR0aW5ncztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbS5maXJlKCdmaWx0ZXJMb2FkJywgbnNvKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3RpdmUtLTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoMCA9PT0gYWN0aXZlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGltLnRyaWdnZXIoJ0ZpbHRlcnNMb2FkZWQnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIGVyckRlc2MsIGV4Y2VwdGlvbikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFjdGl2ZS0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgwID09PSBhY3RpdmUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaW0udHJpZ2dlcignRmlsdGVyc0xvYWRlZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfShuYW1lc3BhY2UpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIGltLmJpbmQoJ0NoYW5nZUFjdGl2ZUFjdGlvbicsIGZ1bmN0aW9uIChlLCBucykge1xuICAgICAgICBpZiAobnMgPT09IGltLmFjdGl2ZUNvbnRyb2xTZXQpIHJldHVybjtcbiAgICAgICAgZm9yICh2YXIgb25zIGluIGltLmNvbnRyb2xTZXRzKSB7XG4gICAgICAgICAgICBnZXRFbGVtKGltLmNvbnRyb2xTZXRzW29uc10pO1xuICAgICAgICAgICAgaWYgKG9ucyAhPT0gbnMpIGdldEVsZW0oaW0uY29udHJvbFNldHNbb25zXSkuc2xpZGVVcCgpO1xuICAgICAgICB9XG4gICAgICAgIGltLmFjdGl2ZUNvbnRyb2xTZXQgPSBucztcbiAgICAgICAgaW0uYWx0ZXJDb3JlKCdhY3RpdmVDb250cm9sU2V0JywgbnMpO1xuICAgICAgICBpZiAoIW5zKSB7XG4gICAgICAgICAgICAkKCdkaXYuY29udHJvbC1zZXRzJywgaW0uY29udHJvbENvbnRleHQpLmZpbmQoJ2g0LmFjdGl2ZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgY3MgPSAkKGltLmNvbnRyb2xTZXRzW25zXSksXG4gICAgICAgICAgICBoZWlnaHQgPSBjcy5zaG93KCkuaGVpZ2h0KCk7XG4gICAgICAgIGlmIChjcy5sZW5ndGggPT0gMCkgcmV0dXJuO1xuICAgICAgICBjcy5oaWRlKCkuaGVpZ2h0KGhlaWdodCkuc2xpZGVEb3duKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuaGVpZ2h0KCcnKVxuICAgICAgICB9KTtcbiAgICB9KTtcblxuICAgIGltLmJpbmQoJ0NoYW5nZUFjdGl2ZUNvbXBvbmVudCcsIGZ1bmN0aW9uIChlLCBucykge1xuICAgICAgICBpZiAobnMgPT09IGltLmFjdGl2ZUNvbXBvbmVudCkgcmV0dXJuO1xuICAgICAgICBmb3IgKHZhciBvbnMgaW4gaW0uY29tcG9uZW50cykge1xuICAgICAgICAgICAgaWYgKG9ucyAhPT0gbnMpIGdldEVsZW0oaW0uY29tcG9uZW50c1tvbnNdKS5zbGlkZVVwKCk7XG4gICAgICAgIH1cbiAgICAgICAgaW0uYWN0aXZlQ29tcG9uZW50ID0gbnM7XG4gICAgICAgIGltLmFsdGVyQ29yZSgnYWN0aXZlQ29tcG9uZW50JywgbnMpO1xuICAgICAgICBpZiAoIW5zKSByZXR1cm47XG4gICAgICAgIHZhciBjcyA9ICQoaW0uY29tcG9uZW50c1tuc10pLFxuICAgICAgICAgICAgaGVpZ2h0ID0gY3Muc2hvdygpLmhlaWdodCgpO1xuICAgICAgICBpZiAoY3MubGVuZ3RoID09IDApIHJldHVybjtcbiAgICAgICAgY3MuaGlkZSgpLmhlaWdodChoZWlnaHQpLnNsaWRlRG93bihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmhlaWdodCgnJylcbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBpbS5iaW5kKCdDaGFuZ2VOYXZUYWInLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICAgICBpbS50cmlnZ2VyKCdDaGFuZ2VBY3RpdmVBY3Rpb24nLCBkYXRhKTtcbiAgICAgICAgaW0udHJpZ2dlcignQ2hhbmdlQWN0aXZlQ29tcG9uZW50JywgZGF0YSk7XG4gICAgICAgIHZhciBwYXJlbnQgPSBnZXRFbGVtKCdkaXYuZWRpdG9yY29udHJvbHMnKTtcbiAgICAgICAgc3dpdGNoIChkYXRhKSB7XG4gICAgICAgICAgICBjYXNlICdhZGQnOlxuICAgICAgICAgICAgICAgIHBhcmVudC5jaGlsZHJlbignZGl2LmNvbnRyb2wtc2V0cycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4oJ2Rpdi5jb21wb25lbnRzJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZWRpdCc6XG4gICAgICAgICAgICAgICAgcGFyZW50LmNoaWxkcmVuKCdkaXYuY29tcG9uZW50cycpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICBwYXJlbnQuY2hpbGRyZW4oJ2Rpdi5jb250cm9sLXNldHMnKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgIH1cbiAgICB9KTtcblxuXG4gICAgaW0uYmluZCgnRmlsdGVyc0xvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgaW0uaGlkZUxvYWRlcigpO1xuICAgIH0pO1xuICAgIGltLnNsaWRlT3V0ID0gJChcIjxkaXYvPlwiKS5hZGRDbGFzcygnc2xpZGVPdXQnKS5jc3Moe1xuICAgICAgICB3aWR0aDowLFxuICAgICAgICBmbG9hdDoncmlnaHQnLFxuICAgICAgICBoZWlnaHQ6JzEwMCUnLFxuICAgICAgICAnb3ZlcmZsb3cteCc6J2hpZGRlbicsXG4gICAgICAgIHJpZ2h0OmltLmNvbnRyb2xDb250ZXh0LndpZHRoKCktMSxcbiAgICAgICAgcG9zaXRpb246J2Fic29sdXRlJyxcbiAgICAgICAgYmFja2dyb3VuZDond2hpdGUnLFxuICAgICAgICAnYm94LXNoYWRvdyc6J2JsYWNrIC0yMHB4IDAgMjBweCAtMjVweCdcbiAgICB9KTtcblxuICAgIGltLnNsaWRlT3V0Q29udGVudHMgPSAkKCc8ZGl2Lz4nKS5hcHBlbmRUbyhpbS5zbGlkZU91dCkud2lkdGgoMzAwKTtcbiAgICBpbS5zaG93U2xpZGVPdXQgPSBmdW5jdGlvbihjb250ZW50cyxjYWxsYmFjaykge1xuICAgICAgICBpbS5oaWRlU2xpZGVPdXQoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGltLnNsaWRlT3V0LmVtcHR5KCk7XG4gICAgICAgICAgICBpbS5zbGlkZU91dENvbnRlbnRzID0gY29udGVudHMud2lkdGgoMzAwKTtcbiAgICAgICAgICAgIGltLnNsaWRlT3V0LmFwcGVuZChpbS5zbGlkZU91dENvbnRlbnRzKVxuICAgICAgICAgICAgaW0uc2xpZGVPdXQuYWRkQ2xhc3MoJ2FjdGl2ZScpLmFkZENsYXNzKCdzbGlkaW5nJyk7XG4gICAgICAgICAgICBpbS5zbGlkZU91dC5zdG9wKDEpLnNsaWRlT3V0KDMwMCwgZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBpbS5zbGlkZU91dC5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICAgICAgICAgICgodHlwZW9mIGNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSAmJiBjYWxsYmFjaygpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGltLmhpZGVTbGlkZU91dCA9IGZ1bmN0aW9uKGNhbGxiYWNrKSB7XG4gICAgICAgIGltLnNsaWRlT3V0LmFkZENsYXNzKCdzbGlkaW5nJyk7XG4gICAgICAgIGltLnNsaWRlT3V0LnNsaWRlSW4oMzAwLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBpbS5zbGlkZU91dC5jc3MoJ2JvcmRlci1yaWdodCcsJzAnKTtcbiAgICAgICAgICAgIGltLnNsaWRlT3V0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5yZW1vdmVDbGFzcygnc2xpZGluZycpO1xuICAgICAgICAgICAgKCh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpICYmIGNhbGxiYWNrKCkpO1xuICAgICAgICB9KTtcbiAgICB9O1xuICAgIGltLmNvbnRyb2xDb250ZXh0LmFmdGVyKGltLnNsaWRlT3V0KTtcbiAgICAvLyBFbmQgdGhlIEltYWdlRWRpdG9yIG9iamVjdC5cblxuICAgIGltLnNldEFjdGl2ZUVsZW1lbnQoaW0uc3RhZ2UpO1xuXG4gICAgd2luZG93LmM1X2ltYWdlX2VkaXRvciA9IGltOyAvLyBTYWZlIGtlZXBpbmdcbiAgICB3aW5kb3cuaW0gPSBpbTtcbiAgICByZXR1cm4gaW07XG59O1xuXG4kLmZuLkltYWdlRWRpdG9yID0gZnVuY3Rpb24gKHNldHRpbmdzKSB7XG4gICAgKHNldHRpbmdzID09PSB1bmRlZmluZWQgJiYgKHNldHRpbmdzID0ge30pKTtcbiAgICBzZXR0aW5ncy5pbWFnZWxvYWQgPSAkLmZuLmRpYWxvZy5oaWRlTG9hZGVyO1xuICAgIHZhciBzZWxmID0gJCh0aGlzKTtcbiAgICBzZXR0aW5ncy5jb250YWluZXIgPSBzZWxmWzBdO1xuICAgIGlmIChzZWxmLmhlaWdodCgpID09IDApIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzZWxmLkltYWdlRWRpdG9yKHNldHRpbmdzKTtcbiAgICAgICAgfSwgNTApO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHNlbGYuY2xvc2VzdCgnLnVpLWRpYWxvZycpLmZpbmQoJy51aS1yZXNpemFibGUtaGFuZGxlJykuaGlkZSgpO1xuICAgIHNlbGYuaGVpZ2h0KFwiLT0zMFwiKTtcbiAgICAkKCdkaXYuZWRpdG9yY29udHJvbHMnKS5oZWlnaHQoc2VsZi5oZWlnaHQoKSAtIDkwKTtcbiAgICBzZWxmLndpZHRoKFwiLT0zMzBcIikucGFyZW50KCkud2lkdGgoXCItPTMzMFwiKS5jaGlsZHJlbignZGl2LmJvdHRvbUJhcicpLndpZHRoKFwiLT0zMzBcIik7XG4gICAgKHNldHRpbmdzLndpZHRoID09PSB1bmRlZmluZWQgJiYgKHNldHRpbmdzLndpZHRoID0gc2VsZi53aWR0aCgpKSk7XG4gICAgKHNldHRpbmdzLmhlaWdodCA9PT0gdW5kZWZpbmVkICYmIChzZXR0aW5ncy5oZWlnaHQgPSBzZWxmLmhlaWdodCgpKSk7XG4gICAgJC5mbi5kaWFsb2cuc2hvd0xvYWRlcigpO1xuICAgIHZhciBpbSA9IG5ldyBJbWFnZUVkaXRvcihzZXR0aW5ncyk7XG5cbiAgICB2YXIgY29udGV4dCA9IGltLmRvbUNvbnRleHQ7XG4gICAgJCgnZGl2LmNvbnRyb2wtc2V0cyA+IGRpdi5jb250cm9sc2V0JywgY29udGV4dCkuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSAkKHRoaXMpLFxuICAgICAgICAgICAgdHlwZSA9IGNvbnRhaW5lci5kYXRhKCduYW1lc3BhY2UnKTtcblxuICAgICAgICBjb250YWluZXIuZmluZCgnaDQnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIWNvbnRhaW5lci5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgICAgICBpbS5maXJlKCdDaGFuZ2VBY3RpdmVBY3Rpb24nLCAnQ29udHJvbFNldF8nICsgdHlwZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGltLmJpbmQoJ0NoYW5nZUFjdGl2ZUFjdGlvbicsIGZ1bmN0aW9uKGUsIGRhdGEpIHtcbiAgICAgICAgICAgIGlmIChkYXRhID09PSAnQ29udHJvbFNldF8nICsgdHlwZSkge1xuICAgICAgICAgICAgICAgIGNvbnRleHQuZmluZCgnZGl2LmNvbnRyb2xzZXQuYWN0aXZlJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLmNoaWxkcmVuKCcuY29udHJvbCcpLnNsaWRlVXAoMjUwKTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgICAgICAgICAgdmFyIGNvbnRyb2wgPSBjb250YWluZXIuY2hpbGRyZW4oJy5jb250cm9sJykuaGVpZ2h0KCdhdXRvJyk7XG4gICAgICAgICAgICAgICAgY29udHJvbC5zbGlkZURvd24oMjUwKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICAkKCdkaXYuY29udHJvbHMgPiBkaXYuY29udHJvbHNjb250YWluZXInLCBjb250ZXh0KS5jaGlsZHJlbignZGl2LnNhdmUnKS5jaGlsZHJlbignYnV0dG9uLnNhdmUnKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICQodGhpcykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgaW0uc2F2ZSgpO1xuICAgIH0pLmVuZCgpLmNoaWxkcmVuKCdidXR0b24uY2FuY2VsJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICBpZiAoY29uZmlybShjY21pMThuX2ltYWdlZWRpdG9yLmFyZVlvdVN1cmUpKVxuICAgICAgICAgICAgJC5mbi5kaWFsb2cuY2xvc2VUb3AoKTtcbiAgICB9KTtcblxuICAgIGltLm9uKCdDaGFuZ2VBY3RpdmVBY3Rpb24nLCBmdW5jdGlvbiAoZSwgZGF0YSkge1xuICAgICAgICBpZiAoIWRhdGEpIHtcbiAgICAgICAgICAgICQoJ2g0LmFjdGl2ZScsIGNvbnRleHQpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgIH0pO1xuXG4gICAgaW0ub24oJ0NoYW5nZUFjdGl2ZUNvbXBvbmVudCcsIGZ1bmN0aW9uIChlLCBkYXRhKSB7XG4gICAgICAgIGlmICghZGF0YSkge1xuICAgICAgICAgICAgJCgnZGl2LmNvbnRyb2xzZXQuYWN0aXZlJywgY29udGV4dCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBpbS5iaW5kKCdpbWFnZWxvYWQnLCAkLmZuLmRpYWxvZy5oaWRlTG9hZGVyKTtcbiAgICByZXR1cm4gaW07XG59O1xuJC5mbi5zbGlkZU91dCA9IGZ1bmN0aW9uICh0aW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBtZSA9ICQodGhpcyksXG4gICAgICAgIHN0YXJ0V2lkdGggPSBtZS53aWR0aCgpLFxuICAgICAgICB0b3RhbFdpZHRoID0gMjU1O1xuICAgIG1lLmNzcygnb3ZlcmZsb3cteScsICdhdXRvJyk7XG4gICAgaWYgKHN0YXJ0V2lkdGggPT0gdG90YWxXaWR0aCkge1xuICAgICAgICBtZS5hbmltYXRlKHt3aWR0aDogdG90YWxXaWR0aH0sIDAsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIG1lLndpZHRoKHN0YXJ0V2lkdGgpLmFuaW1hdGUoe3dpZHRoOiB0b3RhbFdpZHRofSwgdGltZSB8fCAzMDAsIGNhbGxiYWNrIHx8IGZ1bmN0aW9uICgpIHtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcztcbn07XG4kLmZuLnNsaWRlSW4gPSBmdW5jdGlvbiAodGltZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgbWUgPSAkKHRoaXMpO1xuICAgIG1lLmNzcygnb3ZlcmZsb3cteScsICdoaWRkZW4nKTtcbiAgICBpZiAobWUud2lkdGgoKSA9PT0gMCkge1xuICAgICAgICBtZS5hbmltYXRlKHt3aWR0aDogMH0sIDAsIGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgbWUuYW5pbWF0ZSh7d2lkdGg6IDB9LCB0aW1lIHx8IDMwMCwgY2FsbGJhY2sgfHwgZnVuY3Rpb24gKCkge1xuICAgIH0pO1xuICAgIHJldHVybiB0aGlzO1xufTtcbkltYWdlRWRpdG9yLnByb3RvdHlwZSA9IEltYWdlRWRpdG9yLmZuID0ge1xuICAgIGZpbHRlcjoge1xuICAgICAgICBncmF5c2NhbGU6IEtpbmV0aWMuRmlsdGVycy5HcmF5c2NhbGUsXG4gICAgICAgIHNlcGlhOiBmdW5jdGlvbiAoaW1hZ2VEYXRhKSB7XG4gICAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICAgIHZhciBkYXRhID0gaW1hZ2VEYXRhLmRhdGE7XG4gICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgZGF0YS5sZW5ndGg7IGkgKz0gNCkge1xuICAgICAgICAgICAgICAgIGRhdGFbaV0gICAgID0gKGRhdGFbaV0gKiAwLjM5MyArIGRhdGFbaSArIDFdICogMC43NjkgKyBkYXRhW2kgKyAyXSAqIDAuMTg5KTtcbiAgICAgICAgICAgICAgICBkYXRhW2kgKyAxXSA9IChkYXRhW2ldICogMC4zNDkgKyBkYXRhW2kgKyAxXSAqIDAuNjg2ICsgZGF0YVtpICsgMl0gKiAwLjE2OCk7XG4gICAgICAgICAgICAgICAgZGF0YVtpICsgMl0gPSAoZGF0YVtpXSAqIDAuMjcyICsgZGF0YVtpICsgMV0gKiAwLjUzNCArIGRhdGFbaSArIDJdICogMC4xMzEpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBicmlnaHRuZXNzOiBmdW5jdGlvbiAoaW1hZ2VEYXRhLG9iKSB7XG4gICAgICAgICAgICB2YXIgYWRqdXN0bWVudCA9IG9iLmxldmVsO1xuICAgICAgICAgICAgdmFyIGQgPSBpbWFnZURhdGEuZGF0YTtcbiAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaTxkLmxlbmd0aDsgaSs9NCkge1xuICAgICAgICAgICAgICAgIGRbaV0gKz0gYWRqdXN0bWVudDtcbiAgICAgICAgICAgICAgICBkW2krMV0gKz0gYWRqdXN0bWVudDtcbiAgICAgICAgICAgICAgICBkW2krMl0gKz0gYWRqdXN0bWVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgaW52ZXJ0OiBmdW5jdGlvbiAoaW1hZ2VEYXRhLG9iKSB7XG4gICAgICAgICAgICB2YXIgZCA9IGltYWdlRGF0YS5kYXRhO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGQubGVuZ3RoOyBpKz00KSB7XG4gICAgICAgICAgICAgICAgZFtpXSA9IDI1NSAtIGRbaV07XG4gICAgICAgICAgICAgICAgZFtpKzFdID0gMjU1IC0gZFtpKzFdO1xuICAgICAgICAgICAgICAgIGRbaSsyXSA9IDI1NSAtIGRbaSsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgcmVzdG9yZTogZnVuY3Rpb24gKGltYWdlRGF0YSxvYikge1xuICAgICAgICAgICAgdmFyIGFkanVzdG1lbnQgPSBvYi5sZXZlbDtcbiAgICAgICAgICAgIHZhciBkID0gaW1hZ2VEYXRhLmRhdGE7XG4gICAgICAgICAgICB2YXIgZyA9IG9iLmltYWdlRGF0YS5kYXRhO1xuICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpPGQubGVuZ3RoOyBpKz00KSB7XG4gICAgICAgICAgICAgICAgZFtpXSA9IGdbaV07XG4gICAgICAgICAgICAgICAgZFtpKzFdID0gZ1tpKzFdO1xuICAgICAgICAgICAgICAgIGRbaSsyXSA9IGdbaSsyXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG4iXX0=